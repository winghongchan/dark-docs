/* ==UserStyle==
@name           Shades and Slides
@namespace      userstyles.world/user/winghongchan
@version        2023.08.10
@description    A Material 3 themed dark mode for Google Slides
@author         Walter winghongchan
@homepageURL    https://github.com/winghongchan/dark-docs
@supportURL     https://github.com/winghongchan/dark-docs/issues
@license        GPL-3.0-or-later
@preprocessor   less
@var            checkbox ripples "Ripple animations" 1
==/UserStyle== */

@-moz-document url-prefix("https://docs.google.com/presentation/d/"), url-prefix("https://docs.google.com/presentation/u/") {
  // Variables
  
  :root {
    
    // Colour
    --ddocs-primary: #a8c7fa;
    --ddocs-primary-icon: invert(100%) hue-rotate(190deg) brightness(125%) saturate(95%);
    --ddocs-primary-hover: rgba(168, 199, 250, var(--ddocs-hover-state-layer-opacity)); // Not “on-” state layers are the role colour at a reduced opacity. 
    --ddocs-primary-focus: rgba(168, 199, 250, var(--ddocs-focus-state-layer-opacity));
    --ddocs-primary-pressed: rgba(168, 199, 250, var(--ddocs-pressed-state-layer-opacity));
    --ddocs-on-primary: #062e6f;
    --ddocs-on-primary-checkmark: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxIDEiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiPjxwYXRoIGQ9Ik0uMDQuNjI3LjE0Ni41Mi40My44MDQuMzIzLjkxem0uMTc3LjE3N0wuODU0LjE2Ny45Ni4yNzMuMzIzLjkxeiIgZmlsbD0iIzA2MmU2ZiIvPjwvc3ZnPgo=");
    --ddocs-on-primary-hover: #9bbaef; // “on-” state layers are the “on-” colour at a reduced opacity overlaid on the corresponding not “on-” colour.
    --ddocs-on-primary-focus: #94b4e9;
    --ddocs-on-primary-pressed: #94b4e9;
    --ddocs-primary-container: #004a77;
    --ddocs-on-primary-container: #c2e7ff;
    --ddocs-on-primary-container-icon: invert(100%) hue-rotate(180deg) saturate(150%);
    --ddocs-on-primary-container-hover: #0f5682;
    --ddocs-on-primary-container-focus: #185d88;
    --ddocs-on-primary-container-pressed: #185d88;
    --ddocs-secondary: #7fcfff;
    --ddocs-on-secondary: #003355;
    --ddocs-secondary-container: #0842a0;
    --ddocs-secondary-container-hover: #184fa8; // Determined the colour by overlapping the -on colour at 8% opacity on top of the container. Not a problem until Dark Docs begins support for custom colours. 
    --ddocs-secondary-container-focus: #2156ac;
    --ddocs-on-secondary-container: #d3e3fd;
    --ddocs-on-secondary-container-hover: rgba(211, 227, 253, var(--ddocs-hover-state-layer-opacity));
    --ddocs-on-secondary-container-focus: rgba(211, 227, 253, var(--ddocs-focus-state-layer-opacity));
    --ddocs-on-secondary-container-pressed: rgba(211, 227, 253, var(--ddocs-pressed-state-layer-opacity));
    --ddocs-tertiary: #6dd58c;
    --ddocs-on-tertiary: #0a3818;
    --ddocs-on-tertiary-hover: #64c882;
    --ddocs-on-tertiary-focus: #61c27e;
    --ddocs-on-tertiary-pressed: #61c27e;
    --ddocs-tertiary-container: #0f5223;
    --ddocs-on-tertiary-container: #c4eed0;
    --ddocs-warning: #E1C380;
    --ddocs-on-warning: #3F2E00;
    --ddocs-warning-container: #58440C;
    --ddocs-on-warning-container: #FFDF99;
    --ddocs-error: #f2b8b5;
    --ddocs-on-error: #601410;
    --ddocs-error-container: #8C1D18;
    --ddocs-on-error-container: #F9DEDC;
    --ddocs-background: #1f1f1f;
    --ddocs-on-background: #e3e3e3;
    --ddocs-on-background-hover: rgba(227, 227, 227, var(--ddocs-hover-state-layer-opacity)); // Just the state layer.
    --ddocs-on-background-focus: rgba(227, 227, 227, var(--ddocs-focus-state-layer-opacity));
    --ddocs-on-background-pressed: rgba(227, 227, 227, var(--ddocs-pressed-state-layer-opacity));
    --ddocs-surface-dim: #101417;
    --ddocs-surface: #1f1f1f;
    --ddocs-surface-bright: #353A3D;
    --ddocs-surface-container-lowest: #0A0F12;
    --ddocs-surface-container-low: #28282a; // or #181C20 with tone-based surfaces https://material.io/blog/tone-based-surface-color-m3
    --ddocs-surface-container: #2d2e31; // or #1C2024
    --ddocs-surface-container-high: #313336; // or #262A2E
    --ddocs-surface-container-highest: #444746; // or #313539
    --ddocs-on-surface: #e3e3e3;
    --ddocs-on-surface-disabled: color-mix(in srgb, var(--ddocs-on-surface), transparent 88%);
    --ddocs-on-surface-hover: rgba(227, 227, 227, var(--ddocs-hover-state-layer-opacity)); 
    --ddocs-on-surface-focus: rgba(227, 227, 227, var(--ddocs-focus-state-layer-opacity)); 
    --ddocs-on-surface-pressed: rgba(227, 227, 227, var(--ddocs-pressed-state-layer-opacity)); 
    --ddocs-on-surface-variant: #c4c7c5; 
    --ddocs-on-surface-variant-hover: rgba(196, 199, 197, var(--ddocs-hover-state-layer-opacity));
    --ddocs-on-surface-variant-focus: rgba(196, 199, 197, var(--ddocs-focus-state-layer-opacity));
    --ddocs-on-surface-variant-pressed: rgba(196, 199, 197, var(--ddocs-pressed-state-layer-opacity));
    --ddocs-outline: #8e918f;
    --ddocs-outline-variant: #444746;
    --ddocs-inverse-surface: #e3e3e3; // inverse colours taken from the “Signed in as” bar. Might be a relic of m2
    --ddocs-inverse-on-surface: #3c4043;
    --ddocs-inverse-on-surface-hover: #d5d6d6;
    --ddocs-inverse-on-surface-focus: #cfcfd0;
    --ddocs-inverse-on-surface-pressed: #cfcfd0;
    
    // State layers (a translucent overlay is placed over things that are hovered, focused, &c.)
    --ddocs-hover-state-layer-opacity: 8%;
    --ddocs-focus-state-layer-opacity: 12%;
    --ddocs-pressed-state-layer-opacity: 12%;
    --ddocs-dragged-state-layer-opacity: 16%;
    
    // Shape
    --ddocs-corner-none: 0rem;
    --ddocs-corner-xs: 0.25rem;
    --ddocs-corner-s: 0.5rem;
    --ddocs-corner-m: 0.75rem;
    --ddocs-corner-l: 1rem;
    --ddocs-corner-xl: 1.75rem;
    
    // Shadow
    --ddocs-level1: 0px 3px 1px -2px rgb(0 0 0 / .2), 0px 2px 2px 0px rgb(0 0 0 / .14), 0px 1px 5px 0px rgb(0 0 0 / .12);
    --ddocs-level2: 0px 2px 4px -1px rgb(0 0 0 / .2), 0px 4px 5px 0px rgb(0 0 0 / .14), 0px 1px 10px 0px rgb(0 0 0 / .12);
    --ddocs-level3: 0px 5px 5px -3px rgb(0 0 0 / .2), 0px 8px 10px 1px rgb(0 0 0 / .14), 0px 3px 14px 2px rgb(0 0 0 / .12);
    --ddocs-level4: 0px 5px 5px -3px rgb(0 0 0 / .2), 0px 8px 10px 1px rgb(0 0 0 / .14), 0px 3px 14px 2px rgb(0 0 0 / .12);
    --ddocs-level5: 0px 8px 10px -6px rgb(0 0 0 / .2), 0px 16px 24px 2px rgb(0 0 0 / .14), 0px 6px 30px 5px rgb(0 0 0 / .12);
    
    // Type
    --ddocs-type-brand: Google Sans,Roboto,sans-serif;
    
    --paleblue-icons: hue-rotate(3.6deg) saturate(32.2%) brightness(170%); /* To desaturate blue icons to make them more legible against a dark background. If it is an inline SVG, changing its fill color to palerblue is preferable. */
    --palegreen-icons: hue-rotate(-2deg) saturate(38%) brightness(182%);
    --white-icons: brightness(300%) saturate(10%);
    --whiter-icons: brightness(325%);
    --darkfilter: invert() hue-rotate(180deg) contrast(80%);
    --on: background-color 0.02s ease-in, border-color 0.06s ease, color 0.05s ease, filter 0.01s ease;
    --off: background-color 0.25s ease, border-color 0.15s ease, color 0.25s ease, filter 0.25s ease;
    
    // Dark Docs m2 variables (will be removed once side panels and the homepage get Material U’d)
    --palerblue: #8AB4F8; /* For blue text, icons, nearby items that need to be paleblue, and paleblue buttons on hover. */
    --paleblue: #669DF7; /* For blue buttons and other wider areas of paleblue. */
    --blue-ripple: #394457; /* Background color to indicate that something is active (toggled on or being clicked, for example). */
    --palergreen: #81C995; /* Mostly for suggesting mode. */
    --green-ripple: #37493F;
    --paleyellow: #FDD663; /* Mostly for comments. */
    --yellow-ripple: #454134;
    --lightestgray: #F8F9FA; /* For most text. */
    --lightergray: #DADCE0; 
    --lightgray: #BDC1C6; /* For subtext that gives more info, like a placeholder, an email below a name, or a description under an option. */
    --gray: #5F6368;
    --mediumdarkgray: #4A4E51; /* Hover state on menus. */
    --darkgray: #3C4043; /* Multiple purposes, like outlining dialog boxes to make them separate from what's behind them, or menus. */
    --darkergray: #303235; /* A hover state. */
    --darkestgray: #202124; /* For backgrounds. */
    
    /* Note to self: https://m3.material.io/foundations/interaction-states The state layer is an overlay with a fixed opacity for each state and uses the same color as the content. … components using the activated or selected states change the container and content color directly. 
    “The default for modern web browsers is 16px, so the conversion is SP_SIZE/16 = rem.” https://m3.material.io/styles/typography/type-scale-tokens So, 1rem = 16px font size. */
  }
  
  @keyframes ripple {
    0% {
      background-size: 0%;
    }
    100% {
      background-size: 480%;
    }
  }
}

.on-surface-icon() {
  &:not(.docs-icon-editors-ia-apps-script, .docs-icon-editors-ia-presentation-yellow, .docs-icon-editors-ia-spreadsheet-green, .docs-icon-star-filled-20-blue600) {
    filter: var(--whiter-icons);
  }
}

.on-surface-variant-icon() {
  &:not(.docs-icon-document, .docs-icon-drawing, .docs-icon-editors-ia-apps-script, .docs-icon-editors-ia-presentation-yellow, .docs-icon-editors-ia-spreadsheet-green, .docs-icon-excel, .docs-icon-pdf, .docs-icon-powerpoint, .docs-icon-presentation, .docs-icon-spreadsheet, .docs-icon-star-filled-20-blue600, .docs-icon-word) {
    filter: var(--white-icons);
  }
  &:is(.docs-icon-close-fullscreen-20x20, .docs-icon-overflow-three-dots, .docs-icon-reload) {
    filter: invert() opacity(.8);
  }
}

.animate-ripple() when (@ripples = 1) {
  animation: ripple 0.12s ease-in forwards;
  background-image: radial-gradient(circle, color-mix(in srgb, currentColor, transparent calc(100% + 7% - var(--ddocs-pressed-state-layer-opacity))) 50%, transparent 60%);
  background-origin: border-box;
  background-position: center;
  background-repeat: no-repeat;
}

.states(@role: "surface") {
  transition: var(--off);
  &:hover {
    transition: var(--on);
  }  
  
  & when (@role = "primary") or (@role = "primary-container") or (@role = "secondary") or (@role = "secondary-container") or (@role = "tertiary") or (@role = "tertiary-container") {
    background: var(e(%("--ddocs-%s", @role)));
    color: var(e(%("--ddocs-on-%s", @role)));
    &:is(:disabled, .jfk-button-disabled) {
      background-color: color-mix(in srgb, var(--ddocs-on-surface), transparent 88%) !important;
      color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%) !important;
    }
    &:hover {
      background-color: color-mix(in srgb, $background, $color var(--ddocs-hover-state-layer-opacity));
      color: var(e(%("--ddocs-on-%s", @role)));
    }
    &:is(:focus, .jfk-button-focused, .jfk-button-hover.jfk-button-focused) {
      background-color: color-mix(in srgb, $background, $color var(--ddocs-focus-state-layer-opacity));
      color: var(e(%("--ddocs-on-%s", @role)));
    }
    &:is(:active, .goog-toolbar-button-active, .goog-toolbar-menu-button-open, .jfk-button-active, .jfk-button-focused.jfk-button-active):not(.jfk-button-disabled) {
      .animate-ripple();
      background-color: color-mix(in srgb, $background, $color var(--ddocs-pressed-state-layer-opacity));
      color: var(e(%("--ddocs-on-%s", @role)));
    }
  }
  
  & when (@role = "surface") or (@role = "surface-variant") {
    background-color: transparent;
    color: var(e(%("--ddocs-on-%s", @role)));
    &:is(.goog-control-disabled, .goog-custom-button-disabled, .goog-flat-button-disabled, .goog-menuitem-disabled, .goog-toolbar-button-disabled) {
      background: none !important;
    }
    &:hover, 
    &.goog-menuitem-highlight{
      background-color: color-mix(in srgb, var(e(%("--ddocs-on-%s", @role))), transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
      color: var(e(%("--ddocs-on-%s", @role)));
    }
    &:focus {
      background-color: color-mix(in srgb, var(e(%("--ddocs-on-%s", @role))), transparent calc(100% - var(--ddocs-focus-state-layer-opacity)));
    }
    &:is(:active, .docs-material-button-active, .docs-material-button-open, .docs-revisions-icon-open, .docs-titlebar-badge-selected, .goog-control-active, .goog-control-open, .goog-custom-button-active, .goog-flat-button-active, .goog-flat-button-open, .goog-flat-menu-button-open, .goog-menu-button-open, .goog-menuitem-active, .goog-toolbar-button-active, .goog-toolbar-menu-button-active, .goog-toolbar-menu-button-open, .jfk-button-active, .jfk-freestanding-menu-button-open):not(.goog-submenu:not(:has(span[style*="font-family"]))):not(.goog-toolbar-button-checked) {
      .animate-ripple();
      background-color: color-mix(in srgb, var(e(%("--ddocs-on-%s", @role))), transparent calc(100% - var(--ddocs-pressed-state-layer-opacity)));
      color: var(e(%("--ddocs-on-%s", @role)));
    }
  }
  
  & when (@role = "surface-container") {
    background: var(e(%("--ddocs-%s", @role)));
    color: var(--ddocs-on-surface);
    &:hover {
      background-color: color-mix(in srgb, $background, $color var(--ddocs-hover-state-layer-opacity));
    }
  }
}

@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Basic components
  
  // Buttons, toolbar
  body.docs-gm.docs-grille-gm3 .docs-main-toolbars :is(.goog-toolbar-button, .goog-toolbar-menu-button) {
    background: none;
    transition: var(--off);
    .states(@role: "surface-variant");
    
    &:not(.goog-toolbar-button-checked) .docs-icon {
      filter: var(--white-icons);
    }
    &.goog-toolbar-button-checked {
      .states(@role: "primary-container");
      
      & .docs-icon {
        filter: var(--ddocs-on-primary-container-icon);
      }
    }
  }
  
  // Buttons, common, filled
  .docs-grille-gm3 .docos.docs-gm .jfk-button.jfk-button-action, 
  .docs-gm .modal-dialog .goog-buttonset-action, 
  .docs-gm .modal-dialog .jfk-button-action, 
  .docs-material-button-fill-primary.docs-material-button {
    .states(@role: "primary");
    border: 1px solid transparent !important;
    border-radius: 50cqmin;
    &.jfk-button-disabled {
      background-color: var(--ddocs-on-surface-disabled);
      color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%);
    }
    &:hover {
      border: 1px solid transparent !important;
      box-shadow: none;
    }
    &:is(:focus, :hover:focus, .jfk-button-focused) { 
      border: 1px solid transparent !important;
      border-radius: 50cqmin;
      box-shadow: none;
    }
    &:active {
      box-shadow: none;
    }
  }
  .docs-material-button-fill-primary.docs-material-button /* Fancy */ .docs-material-button-ripple-element when (@ripples = 1) {
    background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-pressed-state-layer-opacity)));
  }
  
  // Buttons, common, outlined
  .docs-material-button-hairline-default.docs-material-button, 
  .docs-material-button-hairline-primary.docs-material-button, 
  .docs-grille-gm3 .docos.docs-gm .jfk-button.jfk-button-standard, 
  .docs-gm .modal-dialog .modal-dialog-buttons button:not(.goog-buttonset-action, .picker-urlview-insertbutton), 
  .docs-gm .modal-dialog .jfk-button-standard {
    background: transparent;
    border-color: var(--ddocs-outline) !important;
    border-radius: 50cqh;
    color: var(--ddocs-primary);
    &:has(.docs-icon) {
      color: var(--ddocs-on-surface-variant);
    }
    transition: var(--off);
    &:is(:hover, .jfk-button-hover) {
      background-color: var(--ddocs-primary-hover);
      border-color: var(--ddocs-outline) !important;
      color: var(--ddocs-primary);
      &:has(.docs-icon) {
        background-color: var(--ddocs-on-surface-variant-hover);
        color: var(--ddocs-on-surface-variant);
      }
      transition: var(--on);
    }
    &:is(:focus, .jfk-button-focused, .jfk-button-hover.jfk-button-focused) {
      background-color: var(--ddocs-primary-focus);
      border-color: var(--ddocs-primary) !important;
      border-radius: 50cqh;
      color: var(--ddocs-primary);
      &:has(.docs-icon) {
        background-color: var(--ddocs-on-surface-variant-focus);
        border-color: var(--ddocs-outline) !important;
        color: var(--ddocs-on-surface-variant);
      }
    }
    &.jfk-button-disabled {
      background: transparent;
      border-color: color-mix(in srgb, var(--ddocs-on-surface), transparent 88%) !important;
      color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%);
      opacity: 1;
    }
    &:not(:has(.docs-material-button-ripple-element)):is(:active, .jfk-button-active) {
      .animate-ripple();
    }
    & .docs-material-button-ripple-element when (@ripples = 1) {
      background-color: var(--ddocs-primary-pressed);
    }
    &:has(.docs-icon) .docs-material-button-ripple-element when (@ripples = 1) {
      background-color: var(--ddocs-on-surface-variant-pressed);
    }
    .docs-icon {
      .on-surface-variant-icon();
    }
  }
  
  // Buttons, common, text
  .docs-material-button-flat-primary {
    color: var(--ddocs-primary);
    &>.docs-material-button-ripple-element when (@ripples = 1) {
      background-color: var(--ddocs-primary-pressed);
    }
  }
  .docs-material-menu-button-flat-primary {
    border-radius: 50cqh;
    color: var(--ddocs-primary);
    font: 500 0.875rem Google Sans,Roboto,sans-serif;
    text-transform: capitalize;
    transition: var(--off);
    &.docs-material-menu-button-flat-primary-hover {
      background-color: var(--ddocs-primary-hover);
      transition: var(--on);
    }
    &.docs-material-menu-button-flat-primary-focused {
      background-color: var(--ddocs-primary-focus);
      border-color: transparent;
    }
    &.docs-material-menu-button-flat-primary-open {
      .animate-ripple();
      
      .docs-material-menu-button-flat-primary-dropdown {
        transform: rotate(-180deg) translateY(-2px);
      }
    }
    
    .docs-material-menu-button-flat-primary-dropdown {
      transition: transform 0.2s;
    }
    .docs-material-menu-button-flat-primary-dropdown-icon {
      opacity: 1;
      position: relative;
      top: 2px;
      
      path {
        fill: currentColor;
      }
    }
  }
  .docs-material-button /* Fancy */ {
    border-radius: 50cqh;
    font: 500 0.875rem Google Sans,Roboto,sans-serif;
    text-transform: capitalize;
    transition: var(--off);
    &.docs-material-button-hover {
      background-color: var(--ddocs-primary-hover);
    }
    &.docs-material-button-focused {
      background-color: var(--ddocs-primary-focus);
      border-color: transparent;
    }
    &.docs-material-button-active {
      color: var(--ddocs-primary);
    }
  }
  
  // Checkboxes
  .checkbox-state-layer() {
    &::after /* I’m adding a state layer */ {
      background-color: currentColor;
      border-radius: 50%;
      content: "";
      display: block;
      height: 40px;
      left: -13px;
      opacity: 0;
      position: absolute;
      top: -13px;
      transition: opacity 0.25s ease;
      width: $height;
    }
    &-hover::after {
      opacity: var(--ddocs-hover-state-layer-opacity);
      transition: opacity 0.02s ease-in;
    }
    &-focused::after {
      opacity: var(--ddocs-focus-state-layer-opacity);
    }
    &-active::after {
      opacity: var(--ddocs-pressed-state-layer-opacity);
    }
  }
  div.docs-material-gm-checkbox, 
  span.docs-material-gm-checkbox {
    border-color: currentColor !important;
    color: var(--ddocs-on-surface);
    &:not(.goog-inline-block) {
      position: relative;
      top: unset;
    }
    &.docs-material-gm-checkbox-checked, 
    &.docs-material-gm-checkbox-undetermined {
      background-color: currentColor;
      color: var(--ddocs-primary);
      
      &::before /* Checkmark */ {
        content: var(--ddocs-on-primary-checkmark);
      }
    }
    
    .checkbox-state-layer();
  }
  .jfk-checkbox {
    background: transparent;
    border: 2px solid currentColor;
    border-radius: 2px;
    box-sizing: border-box;
    color: var(--ddocs-on-surface);
    height: 1.125rem;
    width: $height;
    &-clearOutline&-focused {
      border: 2px solid currentColor;
    }
    &.jfk-checkbox-checked {
      background-color: currentColor;
      color: var(--ddocs-primary);
      
      .jfk-checkbox-checkmark {
        background-image: var(--ddocs-on-primary-checkmark);
        background-position: center;
        background-size: 15px;
        height: inherit;
        left: -2px;
        top: -2px;
        width: inherit;
      }
    }
    
    .checkbox-state-layer();
  }
  .docs-material-gm-labeled-checkbox /* Fancy */ {
    position: relative; 
    
    .docs-material-gm-labeled-checkbox-checkbox {
      border-color: var(--ddocs-on-surface);
      color: var(--ddocs-on-surface);
      &.docs-material-gm-labeled-checkbox-checked {
        background-color: var(--ddocs-primary);
        border-color: $background-color;
        color: var(--ddocs-primary);
        &::before {
          filter: invert();
        }
      }
    }
    .docs-material-gm-labeled-checkbox-circle {
      transition: var(--off);
    }
    &.docs-material-gm-labeled-checkbox-hover .docs-material-gm-labeled-checkbox-circle {
      background-color: var(--ddocs-on-surface-hover);
      opacity: 1;
      transition: var(--on);
    }
    &.docs-material-gm-labeled-checkbox-focused .docs-material-gm-labeled-checkbox-circle {
      background-color: var(--ddocs-on-surface-focus);
      opacity: 1;
    }
    &.docs-material-gm-labeled-checkbox-checked.docs-material-gm-labeled-checkbox-hover .docs-material-gm-labeled-checkbox-circle {
      background-color: var(--ddocs-primary-hover);
    }
    &.docs-material-gm-labeled-checkbox-checked.docs-material-gm-labeled-checkbox-focused .docs-material-gm-labeled-checkbox-circle {
      background-color: var(--ddocs-primary-focus);
    }
    .docs-material-gm-labeled-checkbox-label {
      color: var(--ddocs-on-surface);
    }
    .docs-material-gm-labeled-checkbox-description {
      color: var(--ddocs-on-surface-variant);
    }
  }
  .docs-material-gm-unlabeled-checkbox /* Also fancy */ {
    .docs-material-gm-unlabeled-checkbox-checkbox {
      border-color: var(--ddocs-on-surface);
    }
    .docs-material-gm-unlabeled-checkbox-circle {
      background-color: var(--ddocs-on-surface);
      opacity: 0;
      transition: opacity 0.25s ease;
    }
    &.docs-material-gm-unlabeled-checkbox-hover .docs-material-gm-unlabeled-checkbox-circle {
      opacity: var(--ddocs-hover-state-layer-opacity);
      transition: opacity 0.02s ease-in;
    }
    &.docs-material-gm-unlabeled-checkbox-focused .docs-material-gm-unlabeled-checkbox-circle {
      opacity: var(--ddocs-focus-state-layer-opacity);
    }
    &.docs-material-gm-unlabeled-checkbox-checked {
      .docs-material-gm-unlabeled-checkbox-checkbox {
        background-color: var(--ddocs-primary);
        border-color: $background-color;
        
        &::before {
          content: var(--ddocs-on-primary-checkmark);
        }
      }
      .docs-material-gm-unlabeled-checkbox-circle {
        background-color: var(--ddocs-primary);
      }
    }
  }
  
  // Dividers
  .docs-gm .goog-menuseparator, 
  body.docs-gm.docs-grille-gm3 .docs-main-toolbars .goog-toolbar-separator {
    border-color: var(--ddocs-outline-variant);
  }
  
  // Menus
  .docs-grille-gm3 .goog-menu {
    background-color: var(--ddocs-surface-container-high);
    border: none;
    box-shadow: var(--ddocs-level2);
    color: var(--ddocs-on-surface);
    
    .goog-menuitem {
      color: currentColor;
      .states();
      
      & .goog-menuitem-content {
        color: currentColor;
      }
      &.goog-menuitem-disabled .goog-menuitem-content {
        opacity: 38%;
      }
      
      & .docs-icon-img /* Icon */ {
        .on-surface-variant-icon();
      }
      &.goog-menuitem-disabled .goog-menuitem-icon {
        filter: unset;
        .on-surface-icon();
        opacity: 38%;
      }
      
      &.apps-menuitem.goog-option-selected:not(:has(span[style*="font-weight"])) .goog-menuitem-checkbox /* Modern checkmark */ {
        filter: invert() brightness(150%);
      }
      
      & .goog-menuitem-accel /* Keyboard shortcut */, 
      & .punch-qanda-presenter-view-menu-item-description {
        color: var(--ddocs-on-surface-variant);
      }
      &.goog-menuitem-disabled .goog-menuitem-accel {
        color: var(--ddocs-on-surface-variant) !important;
        opacity: 38%;
      }

      & .goog-submenu-arrow /* Nested menu arrow */ {
        color: var(--ddocs-on-surface-variant);
        opacity: 1;
      }
      &.goog-submenu-open.goog-submenu:not(.goog-menuitem-disabled) .goog-submenu-arrow {
        color: var(--ddocs-on-surface);
        transform: translateX(5px);
        transition: color 0.3s, transform 0.3s;
      }
      &.goog-menuitem-disabled .goog-submenu-arrow {
        color: var(--ddocs-on-surface);
        opacity: 38%;
      }
    }
  }
  
  // Progress indicators, circular
  .spinner-red {
    border-color: var(--ddocs-error);
  }
  .spinner-yellow {
    border-color: var(--paleyellow);
  }
  .spinner-green {
    border-color: var(--palergreen);
  }
  .spinner-blue {
    border-color: var(--palerblue);
  }
  
  // Progress indicators, linear
  .docs-indeterminate-loading-bar {
    background-color: var(--ddocs-surface-container-highest);
    
    >div {
      background-color: var(--ddocs-primary);
    }
  }
  
  // Radio buttons
  .jfk-radiobutton {
    .radio-button();
  }
  
  // Scrollbars
  :root {
    scrollbar-color: var(--ddocs-outline) transparent;
  }
  .docs-gm ::-webkit-scrollbar-thumb {
    background-color: var(--ddocs-outline);
    &:hover {
      background-color: var(--ddocs-on-surface-variant);
    }
    &:active {
      background-color: var(--ddocs-on-surface);
    }
  }
  
  // Sliders
  .docs-material-slider {
    .docs-material-slider-track-on, 
    .docs-material-slider-thumb-grabber {
      background-color: var(--ddocs-primary);
      border-color: $background-color;
    }
    .docs-material-slider-focus-ring {
      background-color: var(--ddocs-primary-focus);
    }
    .docs-material-slider-track-off {
      background-color: var(--ddocs-surface-container-highest);
    }
    &.docs-material-slider-horizontal :is(.docs-material-slider-wrapper, .docs-material-slider-track-wrapper, .docs-material-slider-track) {
      border-radius: 50cqmin;
      height: 4px;
    }
    &.goog-slider-disabled {
      .docs-material-slider-track-on, 
      .docs-material-slider-thumb-grabber {
        background-color: color-mix(in srgb, var(--ddocs-on-surface) 38%, var(--ddocs-background));
        border-color: $background-color;
      }
      .docs-material-slider-track-off {
        background-color: var(--ddocs-on-surface-disabled);
      }
    }
  }
  // Buttons beneath slider
  .punch-toggle-slider-button-container {
    .punch-toggle-slider-button {
      color: var(--ddocs-on-surface-variant);
    }
    .punch-toggle-slider-button-selected {
      color: var(--ddocs-on-surface);
    }
  }
  
  // Text fields, message
  .docs-grille-gm3 .docos-input .docos-input-textarea {
    background-color: var(--ddocs-surface-container-highest);
    border-color: $background-color;
    caret-color: var(--ddocs-primary);
    color: var(--ddocs-on-surface);
    transition: var(--off);
    &:hover {
      border-color: var(--ddocs-on-surface-variant);
      transition: var(--on);
    }
    &:focus {
      background-color: var(--ddocs-surface-container-highest);
      color: var(--ddocs-on-surface);
    }
    &:focus-visible {
      border-color: var(--ddocs-primary);
      box-shadow: inset 0 0 0 1px $border-color;
      outline: none;
    }
    
    &.docos-input-contenteditable:empty::before /* Placeholder */ {
      color: var(--ddocs-on-surface-variant);
    }
  }
  
  // Text fields, outlined
  .docs-gm :is(.docs-material-bubble, .docs-material-gm-dialog, .modal-dialog) .jfk-textinput {
    background: transparent;
    border-color: var(--ddocs-outline);
    caret-color: var(--ddocs-primary);
    color: var(--ddocs-on-surface);
    transition: var(--off);
    &:hover {
      border-color: var(--ddocs-on-surface);
      transition: var(--on);
    }
    &:focus {
      border-color: var(--ddocs-primary);
    }
    &::placeholder {
      color: var(--ddocs-on-surface-variant);
    }
  }
  
  // Text fields, outlined, menu
  .docs-gm .modal-dialog .goog-flat-menu-button, 
  .docs-gm .docs-material-gm-dialog .goog-flat-menu-button {
    border-color: var(--ddocs-outline);
    border-radius: var(--ddocs-corner-xs);
    transition: var(--off);
    &.goog-flat-menu-button-hover {
      border: 1px solid var(--ddocs-on-surface);
      transition: var(--on);
    }
    &.goog-flat-menu-button-focused {
      border: 1px solid var(--ddocs-primary);
      box-shadow: inset 0 0 0 1px var(--ddocs-primary);
    }
    &:active {
      background: none;
    }
    
    .goog-flat-menu-button-caption {
      color: var(--ddocs-on-surface);
    }
    .goog-flat-menu-button-dropdown {
      .on-surface-variant-icon();
      flex-shrink: 0;
      transition: 0.2s transform;
    }
    &.goog-flat-menu-button-open .goog-flat-menu-button-dropdown {
      transform: rotate(180deg);
    }
    &.docs-flatcolormenubutton .goog-flat-menu-button-caption {
      border-color: var(--ddocs-outline);
    }
  }
  .docs-material-gm-select, .docs-material-gm-labeled-select, .docs-gm-labeled-color-picker {
    color: var(--ddocs-on-surface);
    
    .docs-material-gm-select-outer-box, .docs-material-gm-labeled-select-outer-box, .docs-gm-labeled-color-picker-outer-box {
      border-color: var(--ddocs-outline);
      transition: var(--off);
      
      .docs-material-gm-select-caption, .docs-material-gm-labeled-select-caption {
        color: inherit;
      }
      .docs-color-picker-caption {
        border-color: var(--ddocs-outline);
      }
    }
    &.docs-material-gm-select-hover>.docs-material-gm-select-outer-box, 
    &.docs-material-gm-labeled-select-hover>.docs-material-gm-labeled-select-outer-box, 
    &.docs-gm-labeled-color-picker-hover .docs-gm-labeled-color-picker-outer-box {
      border-color: var(--ddocs-on-surface);
      transition: var(--on);
    }
    &.docs-material-gm-select-focused>.docs-material-gm-select-outer-box,
    &.docs-material-gm-labeled-select-focused>.docs-material-gm-labeled-select-outer-box, 
    &.docs-gm-labeled-color-picker-focused .docs-gm-labeled-color-picker-outer-box {
      border-color: var(--ddocs-primary);
      box-shadow: inset 0 0 0 1px var(--ddocs-primary);
    }
    
    .docs-material-gm-select-dropdown, .docs-color-picker-dropdown {
      transition: 0.2s transform;
      
      .docs-icon-arrow-dropdown, .docs-color-picker-dropdown-icon {
        .on-surface-variant-icon();
      }
    }
    &.docs-material-gm-select-open .docs-material-gm-select-dropdown, 
    &.docs-gm-labeled-color-picker-open .docs-color-picker-dropdown {
      transform: rotate(180deg);
    }
    .docs-material-gm-labeled-select-dropdown-icon {
      .on-surface-variant-icon();
      opacity: 80%;
      transition: 0.2s transform;
    }
  }
  .docs-material-gm-labeled-select-label, .docs-gm-labeled-color-picker-label {
    color: var(--ddocs-on-surface-variant);
  }
  
  // Tooltips, basic
  .docs-grille-gm3 .jfk-tooltip {
    background-color: var(--ddocs-inverse-surface);
    color: var(--ddocs-inverse-on-surface);
    
    & .scb-tooltip-contents, .scb-tooltip-title /* Share button tooltip */ {
      color: currentColor;
    }
  }
}

// Mixins

// Buttons, common
.common-button(@type: "filled", @role: "primary") {
  border-radius: 50cqh;
  box-shadow: none;
  &:focus {
    border-radius: 50cqh;
  }
  &.goog-inline-block:has(.jfk-button-label) {
    display: inline-grid;
    padding: 0 24px;
    place-items: center;
    &>.jfk-button-label {
      margin: 0;
    }
  }
  & when (@type = "filled") {
    box-shadow: none !important;
  }
  & when (@type = "filled") and (@role = "primary") {
    .states(@role);
  }
  & when (@type = "filled tonal") and (@role = "primary") or (@role = "secondary") {
    .states(%("%s-container", @role));
  }
  & when (@type = "outlined") {
    background: transparent;
    border-color: var(--ddocs-outline) !important;
    color: var(e(%("--ddocs-%s", @role)));
    transition: var(--off);
    &.goog-flat-button-disabled {
      background: transparent !important;
      border-color: color-mix(in srgb, var(--ddocs-on-surface), transparent 88%) !important;
      color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%) !important;
      opacity: 1;
    }
    &:hover {
      background-color: color-mix(in srgb, $color, transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
      color: var(e(%("--ddocs-%s", @role)));
      transition: var(--on);
    }
    &:is(:focus) {
      background-color: color-mix(in srgb, $color, transparent calc(100% - var(--ddocs-focus-state-layer-opacity)));
      border-color: currentColor !important;
    }
    &:is(:active, .goog-flat-button-active, .goog-flat-menu-button-open, .jfk-button-active) {
      .animate-ripple();
    }
  }
  & when (@type = "text") {
    color: var(e(%("--ddocs-%s", @role)));
    transition: var(--off);
    &:hover {
      background-color: color-mix(in srgb, $color, transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
      transition: var(--on);
    }
    &:focus {
      background-color: color-mix(in srgb, $color, transparent calc(100% - var(--ddocs-focus-state-layer-opacity)));
    }
    &:active {
      background-color: color-mix(in srgb, $color, transparent calc(100% - var(--ddocs-pressed-state-layer-opacity)));
      .animate-ripple();
    }
  }
}

// Buttons, icon
.icon-button(@type: "standard"; @role: "surface-variant") {
  & when (@type = "standard") {
    & when (@role = "surface-variant") {
      color: var(--ddocs-on-surface-variant);
      .states(@role: @role);
      
      .docs-icon-img when (@role = "surface-variant") {
        .on-surface-variant-icon();
      }
    }
    
    & when (@role = "primary") {
      color: var(--ddocs-primary);
      transition: var(--off);
      &:hover {
        background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
        transition: var(--on);
      }
      &:focus {
        background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-focus-state-layer-opacity)));
        transition: var(--on);
      }
      &.jfk-button-active {
        .animate-ripple();
      }
      
      .docs-icon-img {
        filter: var(--ddocs-primary-icon);
      }
    }
  }
}

.checkmark-fix() /* This is for the menus that use the older grayish non-90° checkmark */ { 
  background: none;
  &.goog-menuitem-highlight {
    background-color: var(--ddocs-on-surface-hover);
  }
  .goog-menuitem-checkbox {
    background: no-repeat url(//ssl.gstatic.com/docs/common/material_common_sprite477.svg) 0 -1056px;
    filter: invert(100%) opacity(75%);
    height: 21px;
    margin-top: -9px;
    top: 50%;
  }
  &.apps-menuitem .goog-menuitem-checkbox {
    left: -1px;
  }
}

.filter-chip() {
  background-color: transparent;
  border: 1px solid var(--ddocs-outline);
  border-radius: 0.5rem;
  color: var(--ddocs-on-surface-variant);
  &.goog-inline-block {
    display: inline-flex;
    gap: 0.5rem;
    justify-content: center;
    padding-top: 0;
    padding-bottom: 0;
  }
  height: 2rem;
  padding-left: 1rem;
  padding-right: 1rem;
  &:has(.docs-material-menu-button-flat-default-dropdown, .goog-flat-menu-button-dropdown) {
    padding-right: 0.5rem;
  }
  transition: var(--off);
  &:is(.docs-material-menu-button-flat-default-hover, .goog-flat-menu-button-hover) {
    background-color: var(--ddocs-on-surface-variant-hover);
    transition: var(--on);
  }
  &:is(.docs-material-menu-button-flat-default-focused, .goog-flat-menu-button-focused) {
    background-color: var(--ddocs-on-surface-variant-focus);
  }

  &>.docs-icon {
    flex-shrink: 0;
    margin: 0;
  }
  &>:is(.docs-material-menu-button-flat-default-caption, .goog-flat-menu-button-caption) {
    color: inherit;
    font-weight: 500;
    margin: 0;
    white-space: nowrap;
  }
  &>.goog-flat-menu-button-dropdown {
    filter: var(--whiter-icons) brightness(80%);
    flex-shrink: 0;
  }
  &:not(.filter-applied)>.docs-material-menu-button-flat-default-dropdown svg {
    fill: var(--ddocs-on-surface-variant);
  }
  &.filter-applied {
    background-color: var(--ddocs-primary-container);
    border: none;
    color: var(--ddocs-on-primary-container);
    padding-left: 0.5rem;
    &.docs-material-menu-button-flat-default-hover {
      background-color: var(--ddocs-on-primary-container-hover);
      transition: var(--on);
    }
    &.docs-material-menu-button-flat-default-focused {
      background-color: var(--ddocs-on-primary-container-focus);
    }
    &.docs-material-menu-button-flat-default-open {
      background-color: var(--ddocs-on-primary-container-pressed);
    }

    &>.docs-material-menu-button-flat-default-dropdown svg {
      fill: var(--ddocs-on-primary-container);
    }
  }

  &>.docs-icon .docs-icon-img {
    filter: brightness(5) hue-rotate(60deg) saturate(90%);
  }

  &>.docs-material-menu-button-flat-default-dropdown {
    flex-shrink: 0;
    height: 1.125rem;
    margin: 0;
    width: $height;

    & svg {
      height: 100%;
      width: $height;
    }
  }
}

.menu() {
  background-color: var(--ddocs-surface-container);
  color: var(--ddocs-on-surface);
  
  .goog-menuitem, .goog-menuitem-content {
    color: inherit;
  }
  .goog-option-selected .goog-menuitem-checkbox {
    filter: invert() opacity(.8);
  }
  .goog-menuitem {
    transition: var(--off);
    &.goog-menuitem-highlight {
      background-color: var(--ddocs-on-surface-hover);
      transition: var(--on);
    }
    &.goog-menuitem-active {
      background-color: var(--ddocs-on-surface-pressed);
      .animate-ripple();
    }
  }
}

.radio-button() {
  &.jfk-radiobutton {
    align-items: center;
    color: var(--ddocs-on-surface-variant);
    display: inline-flex;
    gap: .5rem;
    
    .jfk-radiobutton-radio {
      background: none;
      border-color: currentColor;
      border-width: 2px;
      height: 20px;
      padding: 8px;
      position: static;
      width: 20px;
      &::before {
        background-color: var(--ddocs-on-surface);
        border-radius: 50cqmin;
        content: "";
        display: block;
        height: 40px;
        left: -3px;
        opacity: 0;
        position: absolute;
        top: -6px;
        transition: 0.2s opacity;
        width: 40px;
      }
    }
    .jfk-radiobutton-label {
      color: var(--ddocs-on-surface);
      margin-left: unset;
    }
    
    &.jfk-radiobutton-hover {
      color: var(--ddocs-on-surface);
      transition: var(--off);
      
      .jfk-radiobutton-radio::before {
        opacity: var(--ddocs-hover-state-layer-opacity);
        transition: 0.02s opacity;
      }
    }
    &.jfk-radiobutton-focused .jfk-radiobutton-radio::before {
      opacity: var(--ddocs-focus-state-layer-opacity);
    }
    &.jfk-radiobutton-active .jfk-radiobutton-radio::before {
      opacity: var(--ddocs-pressed-state-layer-opacity);
    }
    
    &.jfk-radiobutton-checked:not(.jfk-radiobutton-disabled) .jfk-radiobutton-radio {
      background: currentColor;
      background-clip: content-box;
      color: var(--ddocs-primary);
      padding: 3px;
      transition: padding 0.15s ease-out;
      &::before {
        background-color: var(--ddocs-primary);
      }
      &::after {
        display: none;
      }
    }
  }
}

.slider(@orientation: "horizontal") {
  .docs-material-slider-track-on {
    background-color: var(--ddocs-primary);
    border-color: $background-color;
    border-radius: 50cqh;
    height: if(@orientation = "horizontal", 0.25rem);
  }
  .docs-material-slider-track-off {
    background-color: var(--ddocs-surface-container-highest);
    border-color: $background-color;
    border-radius: 50cqh;
    height: if(@orientation = "horizontal", 0.25rem);
  }
  .docs-material-slider-thumb {
    .docs-material-slider-focus-ring {
      background-color: var(--ddocs-primary-focus);
      top: -14px;
    }
    .docs-material-slider-thumb-grabber {
      background-color: var(--ddocs-primary);
      border-color: $background-color;
      bottom: -11px;
      box-shadow: var(--ddocs-level1);
    }
  }
}

.tabs() {
  .docs-tabbar-tab {
    color: var(--ddocs-on-surface-variant);
    transition: var(--off);
  }
  .docs-tabbar-tab-selected {
    color: var(--ddocs-primary) !important;
  }
  .docs-tabbar-tab-hover {
    background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
    color: var(--ddocs-on-surface);
    transition: var(--on);
  }
  .docs-tabbar-tab-active {
    .animate-ripple();
    background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-pressed-state-layer-opacity)));
    color: var(--ddocs-on-surface);
  }
  
  .docs-tabbar-tablabel {
    color: inherit;
  }
  .docs-tabbar-tab-selected::before /* Selected tab’s underline */ {
    border-top-color: currentColor;
  }
}

.text-field(@role: "outlined") {
  & when (@role = "outlined") {
    background: none;
    border-color: var(--ddocs-outline);
    caret-color: var(--ddocs-primary);
    color: var(--ddocs-on-surface);
    padding: 1px 8px;
    transition: var(--off);
    &:hover {
      border-color: var(--ddocs-on-surface);
      transition: var(--on);
    }
    &:focus, &:focus-visible {
      border: 1px solid var(--ddocs-primary);
      box-shadow: inset 0 0 0 1px var(--ddocs-primary);
      outline: none;
    }
  }
}

@-moz-document url-prefix("https://docs.google.com/presentation/u/") {
  // Homepage
  :root {
    scrollbar-color: var(--ddocs-outline) transparent;
  }
  ::-webkit-scrollbar-thumb {
    background-color: var(--ddocs-outline);
    box-shadow: none !important;
  }
  html {
    background: var(--ddocs-background);
  }
  body, .docs-homescreen-container {
    background: var(--ddocs-background);
    color: var(--ddocs-on-surface);
    
    &::-webkit-scrollbar-track-piece {
      background-color: transparent;
    }
  }
  .docs-homescreen-ui-slide-switch {
    .docs-homescreen-ui-slide-switch-rail {
      background-color: var(--ddocs-surface-container-highest);
      border-color: var(--ddocs-outline);
      border-radius: 16px;
      border-width: 2px;
      box-sizing: border-box;
      height: 32px;
      width: 52px;
    }
    .docs-homescreen-ui-slide-switch-knob {
      background-color: var(--ddocs-outline);
      border: none;
      box-shadow: none !important;
      height: 16px;
      left: 8px;
      top: 8px;
      width: 16px;
    }
    &.docs-homescreen-ui-slide-switch-hover {
      .docs-homescreen-ui-slide-switch-knob {
        background-color: var(--ddocs-on-surface-variant);
      }
    }
    &.docs-homescreen-ui-slide-switch-checked {
      .docs-homescreen-ui-slide-switch-rail {
        background-color: var(--ddocs-primary);
        border-color: var(--ddocs-primary);
      }
      .docs-homescreen-ui-slide-switch-knob {
        background-color: var(--ddocs-on-primary);
        height: 24px;
        left: 24px;
        top: 4px;
        width: 24px;
      }
    }
    &.docs-homescreen-ui-slide-switch-disabled {
      .docs-homescreen-ui-slide-switch-rail {
        background-color: var(--ddocs-surface-container-highest);
        border-color: var(--ddocs-on-surface);
        opacity: 12%
      }
      .docs-homescreen-ui-slide-switch-knob {
        background-color: var(--ddocs-on-surface);
        opacity: 38%;
      }
    }
  }
  .modal-dialog /* Dialogs */ {
    background-color: var(--ddocs-surface-container-high);
    border: none;
    border-radius: var(--ddocs-corner-xl);
    padding: 24px;
    
    .modal-dialog-title, .modal-dialog-content {
      background: none;
      color: var(--ddocs-on-surface);
    }
  }
  .docs-homescreen-modaldialog {
    .modal-dialog-userInput {
      background: none;
      border-color: var(--ddocs-outline);
      caret-color: var(--ddocs-primary);
      color: var(--ddocs-on-surface);
      font-size: 16px;
      height: 32px;
      transition: var(--off);
      &:hover {
        border-color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &:focus {
        border-color: var(--ddocs-primary);
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
      }
    }
    .docs-homescreen-modaldialog-cancel-button {
      .common-button(@type: "outlined");
      &:hover {
        border-color: var(--ddocs-outline) !important;
      }
      &:hover:focus {
        background-color: var(--ddocs-primary-focus);
        border-color: var(--ddocs-primary) !important;
      }
      &:active {
        background-color: var(--ddocs-primary-pressed);
        border-color: var(--ddocs-primary) !important;
        color: var(--ddocs-primary);
        .animate-ripple() !important;
      }
    }
    .goog-buttonset-action.docs-homescreen-modaldialog-default-button {
      .common-button();
    }
  }
  .docs-grille-gm3 .docs-ui-toast /* Snackbars */ {
    background-color: var(--ddocs-inverse-surface);
    color: var(--ddocs-inverse-on-surface);
  }
  .jfk-tooltip, .docs-homescreen-drawer~.gb_6e /* Header tooltips :( */ {
    background: var(--ddocs-inverse-surface);
    border: none;
    border-radius: var(--ddocs-corner-xs);
    color: var(--ddocs-inverse-on-surface);
    font-size: .75rem;
    font-weight: 400;
    letter-spacing: 0.4px;
    padding: 6px 8px;
    
    .jfk-tooltip-arrow {
      display: none;
    }
    *, div:first-child {
      color: var(--ddocs-inverse-on-surface);
    }
  }  
  
  header {
    background: var(--ddocs-surface) !important;
    transition: background 0.2s !important;
    
    svg path:is([d*="M3 18h18v-2H3v2zm0-5"], [d*="M20.49,19l-5.73-5.73"], [d*="M19 6.41L17.59 5 12 "], [d*="M6,8c1.1,0 2,-0.9 2,"]) /* Menu, search, clear, apps icons */ {
      fill: var(--ddocs-on-surface-variant);
    }
    
    a[href*="docs.google.com/presentation"]>img[src*="/branding/product"]+span /* “Slides” */ {
      color: var(--ddocs-on-surface);
    }
    
    form[role="search"] /* Search bar */ {
      background-color: var(--ddocs-surface-container-high) !important;
      border: none !important;
      border-radius: 24px;
      overflow: hidden;
      transition: 0.2s background-color;
      &:focus-within {
        box-shadow: none;
      }
      
      &>div:has(input) {
        height: 48px; // Used to maintain height of search bar after the form’s border was removed.
        margin-left: 57px;
        
        &>input[type="text"] /* Workspace accounts */ {
          padding-top: 14px;
        }
        
        &~button svg {
          margin: 4px;
        }
      }
      input {
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface) !important;
        &::placeholder {
          color: var(--ddocs-on-surface-variant) !important;
        }
        &[disabled] {
          color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%);
          -webkit-text-fill-color: $color !important;
        }
      }
      
      &>table /* Search suggestions */ {
        td.gssb_e {
          background: none;
          border-top-color: var(--ddocs-outline);
        }
        table.gssb_m {
          background: none;
          color: var(--ddocs-on-surface);
        }
        
        .ASO_SUGGESTIONS_CONTAINER {
          &>tr[role="option"] {
            transition: var(--off);
            &.gssb_i /* Hover? Focus? */ {
              background-color: var(--ddocs-on-surface-hover);
              transition: var(--on);
              &>.gssb_a {
                border-left: none;
                padding-left: 7px;
              }
            }
            &:not(:has(.gsan_a)):active {
              .animate-ripple();
            }
            .gsan_a /* Empty state (personal accounts) */ {
              color: var(--ddocs-on-surface-variant);
            }
            
            .asor /* Icons */ {
              filter: invert();
              opacity: .8;
            }
            svg.asor_1 /* Magnifying glass icon */ {
              fill: var(--ddocs-on-surface-variant);
            }
          }
          &>tr[role="separator"] div {
            background-color: var(--ddocs-outline-variant);
          }
        }
        .gstq_c, .asor_e /* Suggestion subtext */ {
          color: var(--ddocs-on-surface-variant);
        }
      }
    }
    
    div[role="button"]:has(img[src*="images/logo.gif?uid="]) /* Google Workspace logo and avatar box */ {
      background-color: var(--ddocs-surface-container-high);
      border-color: transparent !important;
      border-radius: 24px;
    }
  }
  .docs-homescreen-search-ac-renderer /* Search suggestions (Workspace accounts) */ {
    background-color: var(--ddocs-surface-container-high);
    border-radius: 24px;
    box-shadow: var(--ddocs-level3);
    overflow: hidden;
    
    .docs-homescreen-search-ac-row {
      border: none;
      transition: var(--off);
      &.docs-homescreen-search-ac-active {
        background-color: var(--ddocs-on-surface-hover);
        transition: var(--on);
      }
    }
  }
  
  // Navigation drawer
  .docs-homescreen-drawer {
    background-color: var(--ddocs-surface-container);
    border-radius: 0 var(--ddocs-corner-l) var(--ddocs-corner-l) 0;
    .docs-homescreen-leftmenu {
      background: none;
    }
    
    .docs-homescreen-leftmenu-material-menu-header-item {
      padding-left: 28px;
    }
    .docs-homescreen-nav-google-logo {
      filter: saturate(0) contrast(0) brightness(1.75);
    }
    .docs-homescreen-leftmenu-material-menu-header-text {
      color: var(--ddocs-on-surface);
    }
    .docs-homescreen-leftmenu-menuseparator {
      border-top-color: var(--ddocs-outline-variant);
      margin-left: 28px;
      margin-right: 28px;
    }
    .docs-homescreen-leftmenu-menuitem {
      border-radius: 20px;
      color: var(--ddocs-on-surface-variant);
      margin: 0 12px;
      padding-left: 16px;
      transition: var(--off);
      &.goog-menuitem-highlight {
        background-color: var(--ddocs-on-surface-hover);
        transition: var(--on);
        .docs-homescreen-leftmenu-menuitem-text {
          color: var(--ddocs-on-surface);
        }
      }
      &.goog-menuitem-focused {
        background-color: var(--ddocs-on-surface-focus);
        outline: none;
        .docs-homescreen-leftmenu-menuitem-text {
          color: var(--ddocs-on-surface);
        }
      }
      &.goog-menuitem-active {
        background-color: var(--ddocs-on-surface-pressed);
        .animate-ripple();
      }
      
      .docs-homescreen-gear-24, .docs-homescreen-help-outline-24 {
        filter: var(--white-icons) opacity(.75);
      }
      .docs-homescreen-leftmenu-menuitem-text {
        color: var(--ddocs-on-surface-variant);
      }
    }
    
    .docs-homescreen-leftmenu-tos-link.ogb-link {
      color: var(--ddocs-on-surface-variant);
      &:hover {
        text-decoration: underline;
      }
    }
  }
  
  // Template gallery
  .docs-homescreen-templates-bar {
    background-color: var(--ddocs-surface-container);
    color: var(--ddocs-on-surface);
    
    .docs-homescreen-templates-bar-back {
      .icon-button();
      background-clip: padding-box;
      border: 4px solid transparent;
      padding: 8px;
      
      .docs-homescreen-img {
        filter: var(--white-icons);
      }
    }
  }
  .docs-homescreen-fcc-content {
    background: var(--ddocs-surface-container-low);
    color: var(--ddocs-on-surface);
    
    .docs-hs-tmp-contractedheader-text /* Start a new presentation */, 
    .docs-hs-tmp-sc-showcase .docs-homescreen-grid-header-title /* Recently used */, 
    .docs-hs-tmp-sc-default .docs-homescreen-grid-header-title /* Personal, Work, &c. */ {
      color: var(--ddocs-on-surface);
    }
    
    .docs-hs-tmp-contractedheader-actions /* Template gallery, menu button */ {
      gap: 0.25rem;
      .docs-hs-tmp-contractedheader-more {
        .common-button(@role: "surface-variant", @type: "text");
        background: none;
        &.jfk-button-hover {
          background-color: var(--ddocs-on-surface-variant-hover);
        }
        &.jfk-button-focused {
          background-color: var(--ddocs-on-surface-variant-focus);
        }
        .docs-homescreen-img::before {
          filter: var(--white-icons);
        }
      }
      .docs-hs-tmp-common-separator {
        border-left-color: var(--ddocs-outline-variant);
        opacity: 1;
      }
      .docs-hs-tmp-contractedheader-overflow {
        .icon-button();
        
        .docs-homescreen-img::before {
          filter: var(--white-icons) saturate(0);
        }
        &.goog-menu-button-open .docs-homescreen-img::before {
          filter: var(--white-icons) saturate(0) brightness(3);
        }
      }
      .docsshared-menu-bubble {
        .menu();
        box-shadow: var(--ddocs-level2);
      }
    }
    
    .docs-hs-tmp-expandedcontentholder-tabbarrow {
      background: var(--ddocs-surface-container);
      border-bottom: 1px solid var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface-variant);
      
      .docs-tabbar-tab {
        transition: var(--off);
        &.docs-tabbar-tab-hover {
          background-color: var(--ddocs-on-surface-hover);
          color: var(--ddocs-on-surface);
          transition: var(--on);
        }
        &.docs-tabbar-tab-active {
          background-color: var(--ddocs-on-surface-pressed);
          .animate-ripple();
        }
        &.docs-tabbar-tab-selected {
          color: var(--ddocs-primary);
          &.docs-tabbar-tab-hover {
            background-color: var(--ddocs-primary-hover);
          }
          &.docs-tabbar-tab-active {
            background-color: var(--ddocs-primary-pressed);
          }
          &::before {
            border-top-color: currentColor;
          }
        }
      }
      .docs-tabbar-tablabel {
        color: currentColor !important;
      }
    }
    
    .docs-hs-tmp-submitbutton-embossed /* Submit template */ {
      .common-button(@type: "outlined");
      border-style: solid;
      border-width: 1px;
      
      .docs-homescreen-img::before {
        content: url("https://ssl.gstatic.com/docs/common/h_sprite59_blue.svg");
        filter: var(--paleblue-icons);
      }
      .docs-hs-tmp-submitbutton-label {
        color: inherit;
      }
    }
    
    .docs-homescreen-templates-templateview-preview {
      background-color: transparent;
      border-color: var(--ddocs-outline);
      border-radius: var(--ddocs-corner-m);
    }
    .docs-homescreen-templates-templateview-title {
      color: inherit;
    }
    .docs-homescreen-templates-templateview-brandauthor {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-homescreen-templates-templateview-addon {
      background-color: var(--ddocs-primary-container);
      color: var(--ddocs-on-primary-container);
    }
  }
  .docs-homescreen-submitdialog /* Submit a template dialog */ {
    background: var(--ddocs-surface-container);
    border: none;
    border-radius: var(--ddocs-corner-xl);
    box-shadow: var(--ddocs-level3);
    
    .exportTitleBar {
      color: var(--ddocs-on-surface);
    }
    .docs-homescreen-submitdialog-content {
      color: var(--ddocs-on-surface-variant);
      
      a {
        color: var(--ddocs-primary);
      }
      
      .docs-homescreen-submitdialog-selectbutton /* Select a presentation button */ {
        background: none;
        border-color: var(--ddocs-outline) !important;
        border-radius: 18px;
        color: var(--ddocs-primary);
        transition: var(--off);
        .docs-homescreen-submitdialog-selectbutton-label {
          color: inherit;
        }
        &:hover {
          background-color: var(--ddocs-primary-hover);
          transition: var(--on);
        }
        &:focus {
          background-color: var(--ddocs-primary-focus);
          border-color: var(--ddocs-primary) !important;
        }
        .quantumWizButtonPaperbuttonRipple {
          background-image: if(@ripples = 1, radial-gradient(circle farthest-side, var(--ddocs-primary-pressed), var(--ddocs-primary-pressed) 80%, transparent 100%), none);
        }
      }
      .docs-homescreen-submitdialog-selectedfilechip /* Selected file */ {
        .states(@role: "surface-variant");
        border-color: var(--ddocs-outline) !important;
        border-radius: var(--ddocs-corner-s);
        height: 32px;
        padding: 0 2px 0 8px;
        &:focus {
          border-color: var(--ddocs-on-surface-variant) !important;
        }
        
        .docs-homescreen-submitdialog-selectedfilechip-fileicon {
          height: 18px;
          margin: 0 8px 0 0;
          width: 18px;
          
          .docs-homescreen-icon-medium {
            transform: scale(.75) translateX(-4px) translateY(-4px);
          }
        }
        .docs-homescreen-submitdialog-selectedfile-close-button {
          .icon-button();
          background-clip: content-box;
          margin: 0;
          padding: 5px;
          
          .docs-homescreen-close-black-20 {
            filter: invert();
          }
        }
      }
      
      .docs-homescreen-submitdialog-selectedfilechip+div /* Submit a copy… switch including label */ {
        .quantumWizTogglePapertoggleEl {
          height: min-content;
          width: min-content;
          
          .exportTrack {
            background: var(--ddocs-surface-container-highest);
            border: 0.125rem solid var(--ddocs-outline);
            border-radius: 1rem;
            box-sizing: border-box;
            height: 2rem;
            position: static;
            width: 3.25rem;
          }
          .exportInk /* State layer */ {
            background: var(--ddocs-on-surface-pressed);
            left: .375rem;
            top: .375rem;
            z-index: unset;
          }
          .exportThumb {
            border: .5rem solid var(--ddocs-outline);
            box-shadow: none;
            left: .5rem;
            top: .5rem;
          }
          &.isChecked {
            .exportTrack {
              background: var(--ddocs-primary);
              border: $background;
            }
            .exportInk {
              background: var(--ddocs-primary-pressed);
              left: 1.625rem;
            }
            .exportThumb {
              border: .75rem solid var(--ddocs-on-primary);
              top: -1.75rem;
            }
          }
        }
        &:hover {
          .exportThumb {
            border-color: var(--ddocs-on-surface-variant);
          }
          .isChecked .exportThumb {
            border-color: var(--ddocs-primary-container);
          }
        }
        .docs-homescreen-submitdialog-copyslidetoggle-label {
          color: var(--ddocs-on-surface);
        }
      }
      
      .docs-homescreen-submitdialog-titlesection /* Title field */ {
        .quantumWizTextinputPaperinputMainContent {
          height: min-content;
        }
        .quantumWizTextinputPaperinputContentArea {
          position: static;
        }
        input {
          border: 1px solid var(--ddocs-outline);
          border-radius: var(--ddocs-corner-xs);
          box-sizing: border-box;
          caret-color: var(--ddocs-primary);
          color: var(--ddocs-on-surface);
          font-size: 1rem;
          height: 56px;
          line-height: 54px;
          padding: 0 1rem;
          transition: var(--off);
          &:hover {
            border-color: var(--ddocs-on-surface);
            transition: var(--on);
          }
        }
        .isFocused input {
          border-color: var(--ddocs-primary);
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }
        .exportLabel {
          background-color: var(--ddocs-surface-container);
          bottom: 19px;
          color: var(--ddocs-on-surface-variant);
          font-size: 1rem;
          left: .75rem;
          padding: 0 5.32px;
          width: min-content;
        }
        .isFocused .exportLabel {
          color: var(--ddocs-primary);
        }
        .exportUnderline, .exportFocusUnderline {
          display: none;
        }
      }
      .docs-homescreen-submitdialog-categoryselectsection /* Category field */ {
        .quantumWizTextinputPaperinputMainContent {
          height: min-content;
        }
        .quantumWizTextinputPaperinputContentArea {
          position: static;
        }
        .quantumWizMenuPaperselectOptionList {
          border: 1px solid var(--ddocs-outline);
          border-radius: var(--ddocs-corner-xs);
          box-sizing: border-box;
          height: 56px;
          transition: var(--off);
          &:hover {
            border-color: var(--ddocs-on-surface);
            transition: var(--on);
          }
          
          .docs-homescreen-submitdialog-categoryoption.isSelected {
            color: var(--ddocs-on-surface);
            font-size: 1rem;
            line-height: 54px;
            padding: 0 3.25rem 0 1rem;
            
            .quantumWizMenuPaperselectRipple {
              display: none;
            }
          }
        }
        &:focus-within .quantumWizMenuPaperselectOptionList {
          border-color: var(--ddocs-primary);
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }
        .exportDropDown {
          border-color: var(--ddocs-on-surface-variant) transparent;
          right: 18px;
          top: 24px;
        }
        .quantumWizTextinputPaperinputFloatingLabel {
          background-color: var(--ddocs-surface-container);
          bottom: 19px;
          color: var(--ddocs-on-surface-variant);
          font-size: 1rem;
          left: .8rem;
          padding: 0 5.32px;
          width: min-content;
        }
        &:focus-within .quantumWizTextinputPaperinputFloatingLabel {
          color: var(--ddocs-primary);
        }
        
        .quantumWizTextinputPaperinputUnderline, .quantumWizTextinputPaperinputFocusUnderline {
          display: none;
        }
        
        .quantumWizMenuPaperselectPopup /* Category menu */ {
          background: var(--ddocs-surface-container-high);
          border-radius: var(--ddocs-corner-xs);
          box-shadow: var(--ddocs-level2);
          padding: .25rem 0;
          
          .exportOption {
            border: none;
            color: var(--ddocs-on-surface);
            padding: 0 .75rem;
            transition: var(--off);
            &.isSelected {
              background-color: var(--ddocs-on-surface-hover);
              transition: var(--on);
            }
            
            .exportContent {
              font-size: 0.875rem;
              line-height: 2.25rem;
            }
          }
        }
      }
    }
    
    .docs-homescreen-submitdialog-cancel-button {
      .common-button(@type: "outlined");
      &:active {
        background-image: none;
      }
      .exportInk {
        background-image: radial-gradient(circle farthest-side, var(--ddocs-primary-pressed), var(--ddocs-primary-pressed) 80%, transparent 100%);
      }
      .exportLabel {
        color: var(--ddocs-primary);
      }
    }
    .docs-homescreen-submitdialog-ok-button {
      .common-button();
      &.isDisabled {
        background: var(--ddocs-on-surface-disabled) !important;
        color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%) !important;
        opacity: 1;
      }
      &:active {
        background-image: none;
      }
      .exportInk {
        background-image: radial-gradient(circle farthest-side, var(--ddocs-on-primary-pressed), var(--ddocs-on-primary-pressed) 80%, transparent 100%);
      }
    }
  }
  
  // File filter bar
  .docs-homescreen-floater-header {
    background-color: var(--ddocs-background);
    color: var(--ddocs-on-surface);
  }
  @keyframes filter-bar-appearance {
    from {
      background-color: var(--ddocs-surface);
    }
    to {
      background-color: var(--ddocs-surface-container-low);
    }
  }
  .docs-homescreen-floater-header-shadow /* Filter bar on scroll */ {
    animation: 0.2s forwards filter-bar-appearance;
    box-shadow: none;
    
    & .docs-homescreen-floater-header {
      background: none;
    }
  }
  body:has(>.docs-homescreen-floater-header-shadow) header /* Gotta match the header with the same background color on scroll */ {
    background-color: var(--ddocs-surface-container-low) !important;
    
    form[role="search"] {
      background-color: var(--ddocs-surface-container-high) !important;
    }
  }
  .docs-homescreen-floater-header {
    .docs-homescreen-owner-filter-button {
      .states(@role: "surface");
      .docs-homescreen-img:before {
        filter: var(--white-icons);
      }
    }
    .docs-homescreen-editorbar-actionbutton {
      .icon-button();
      background-clip: content-box;
      border-radius: 50%;
      height: 40px;
      margin: 5px 0;
      padding: 4px;
      width: 40px;
      .docs-homescreen-icon {
        margin: 8px;
      }
      .docs-homescreen-img:before {
        filter: var(--white-icons);
      }
      &:is(.jfk-button-active, .goog-menu-button-open) .docs-homescreen-img:before {
        filter: var(--white-icons) brightness(3);
      }
      &::before {
        display: none;
      }
    }
  }
  .docs-homescreen-grid-header, .docs-homescreen-list-header {
    background: none;
    color: var(--ddocs-on-surface);
  }
  .docs-homescreen-floater-header-cell .docsshared-menu-bubble /* Sorting menu */ {
    .menu();
  }
  
  // Recent documents, grid 
  .docs-homescreen-grid-item {
    background: none;
    border-color: var(--ddocs-outline-variant) !important;
    border-radius: var(--ddocs-corner-m);
    .states(@role: "surface");
    
    .docs-homescreen-grid-item-thumbnail {
      border-radius: var(--ddocs-corner-m) var(--ddocs-corner-m) 0 0;
    }
    .docs-homescreen-grid-item-metadata-container {
      border: none;
      
      .docs-homescreen-grid-item-title {
        color: var(--ddocs-on-surface);
      }
      .docs-homescreen-people-20, .docs-homescreen-pin-offline-outline-20 {
        filter: var(--white-icons) opacity(.8);
      }
      .docs-homescreen-grid-item-time-container {
        color: var(--ddocs-on-surface-variant);
      }
      .docs-homescreen-item-overflow {
        .icon-button();
        &[aria-expanded="true"] {
          background-color: var(--ddocs-on-surface-variant-pressed);
        }
        .docs-homescreen-img:before {
          filter: var(--white-icons);
        }
        &:active .docs-homescreen-img:before {
          filter: var(--white-icons) brightness(3);
        }
      }
    }
  }
  // Recent documents, list
  .docs-homescreen-list-item {
    .states();
    background: var(--ddocs-surface);
    border: none !important;
    border-radius: 25px;
    color: var(--ddocs-on-surface);
    position: relative; // Necessary to make my implementation of dividers work
    &.goog-control-hover, &.goog-control-focused, &:active {
      outline: none;
      &::before {
        border-top: 2px solid var(--ddocs-surface); // Used to block out the border from the above list item.
        content: "";
        display: block;
        height: 1px;
        position: absolute;
        top: -1.5px;
        width: 100%;
      }
      &::after {
        display: none !important;
      }
    }
    &:not(:last-of-type)::after {
      border-bottom: 1px solid var(--ddocs-outline-variant);
      bottom: 0;
      content: "";
      display: block;
      height: 1px;
      left: 55px;
      position: absolute;
      width: calc(100% - 55px);
    }
    
    .docs-homescreen-list-item-icon {
      border-bottom-color: transparent;
    }
    .docs-homescreen-people-20, .docs-homescreen-pin-offline-outline-20 {
      filter: var(--white-icons) opacity(.75);
    }
    .docs-homescreen-list-item-owner, .docs-homescreen-list-item-time {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-homescreen-item-overflow {
      .icon-button();
      &[aria-expanded="true"] {
        background-color: var(--ddocs-on-surface-variant-pressed);
      }
      
      .docs-homescreen-item-overflow-24::before {
        filter: var(--white-icons) opacity(.8);
      }
      &:active .docs-homescreen-item-overflow-24::before {
        filter: var(--white-icons) brightness(2);
      }
    }
  }
  .docs-homescreen-item-section .docsshared-menu-bubble {
    .menu();
    box-shadow: var(--ddocs-level2);
    
    .docs-homescreen-img {
      .on-surface-variant-icon();
    }
    
    .goog-menuitem .docs-homescreen-ui-slide-switch {
      left: -12px;
      top: -9px;
    }
  }
  
  // New presentation FAB; recent templates shown
  #docs-homescreen-add.jfk-button {
    background-color: var(--ddocs-surface-container-high);
    border-radius: var(--ddocs-corner-l);
    
    &::before {
      background-image: conic-gradient(#ea4335, #4285f4, #34a853, #fbbc05, #ea4335);
      border-radius: var(--ddocs-corner-l);
      content: "";
      height: 56px;
      left: 0;
      opacity: 0;
      position: absolute;
      top: 0;
      transition: opacity 0.25s;
      width: 56px;
    }
    &.jfk-button-hover::before {
      opacity: var(--ddocs-hover-state-layer-opacity);
      transition: opacity 0.02s;
    }
    &.jfk-button-focused::before {
      opacity: var(--ddocs-focus-state-layer-opacity);
    }
  }
  // New presentation FAB, recent templates hidden
  #docs-homescreen-add.quantumWizButtonFabmenuMenu {
    .docsHomescreenUiWizfabbuttonMenuButtonFab /* Normal FAB */ {
      background: var(--ddocs-surface-container-high);
      border-radius: var(--ddocs-corner-l);
      color: var(--ddocs-on-surface-variant);
      transition: var(--off);
      &[aria-expanded="true"] {
        background: var(--ddocs-primary-container);
        color: var(--ddocs-on-primary-container);
      }
      .docs-homescreen-edit-pencil-outline-24::before {
        content: url(https://ssl.gstatic.com/docs/common/h_sprite58_blue.svg);
        filter: brightness(5) saturate(.2);
      }
    }
    .docsHomescreenUiWizfabbuttonMenuItemFab /* Small FAB */ {
      background: var(--ddocs-primary-container);
      border-radius: var(--ddocs-corner-m);
      color: var(--ddocs-on-primary-container);
      .docs-homescreen-template-24::before {
        content: url(https://ssl.gstatic.com/docs/common/h_sprite58_blue.svg);
        filter: brightness(5) saturate(.2);
      }
    }
    
    .quantumWizButtonFloatingactionbuttonHoverOverlay {
      background: currentColor;
      display: block;
      opacity: 0;
      transition: opacity 0.25s;
    }
    :is(.docsHomescreenUiWizfabbuttonMenuButtonFab, .docsHomescreenUiWizfabbuttonMenuItemFab):hover .quantumWizButtonFloatingactionbuttonHoverOverlay {
      opacity: var(--ddocs-hover-state-layer-opacity);
      transition: opacity 0.02s;
    }
    :is(.docsHomescreenUiWizfabbuttonMenuButtonFab, .docsHomescreenUiWizfabbuttonMenuItemFab):focus .quantumWizButtonFloatingactionbuttonHoverOverlay {
      opacity: var(--ddocs-focus-state-layer-opacity);
    }
    :is(.docsHomescreenUiWizfabbuttonMenuButtonFab, .docsHomescreenUiWizfabbuttonMenuItemFab):active {
      .animate-ripple();
    }
  }
  
  // Settings dialog
  .docs-homescreen-settings-dialog.docs-homescreen-modaldialog {
    background: var(--ddocs-surface-container-high);
    border: none;
    border-radius: var(--ddocs-corner-xl);
    
    &>*, .docs-homescreen-settings-itemlabel {
      background: none;
      color: var(--ddocs-on-surface) !important;
    }
    a {
      color: var(--ddocs-primary) !important;
    }
    .docs-homescreen-settings-bidi-checkbox-wrapper, .docs-homescreen-settings-show-templates-checkbox-wrapper, 
    .docs-homescreen-settings-itemvalue {
      color: var(--ddocs-on-surface);
    }
    
    .docs-material-gm-checkbox {
      border-color: var(--ddocs-on-surface-variant);
      
      &.docs-material-gm-checkbox-checked {
        background-color: var(--ddocs-primary);
        border-color: var(--ddocs-primary);
        &::before {
          content: var(--ddocs-on-primary-checkmark);
        }
      }
    }
    
    .docs-homescreen-settings-offline-description, .docs-homescreen-settings-analytics-status-description {
      color: var(--ddocs-on-surface-variant);
    }
    
    .docs-homescreen-settings-ok-button {
      .common-button();
    }
  }
}

@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Top area of editor
  
  // File name
  #docs-title-widget {
    div.docs-title-input-label {
      color: var(--ddocs-on-surface);
      visibility: hidden !important;
    }
    input.docs-title-input {
      caret-color: var(--ddocs-primary);
      height: 22px;
      transition: var(--off);
      visibility: visible !important;
      &:hover {
        border-color: var(--ddocs-outline);
        transition: var(--on);
      }
      &:focus {
        border: 1px solid var(--ddocs-primary) !important;
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        margin: 0;
      }
    }
  }
  
  // .PPTX indicator
  .office-editing-file-extension {
    background: var(--ddocs-primary-container);
    color: var(--ddocs-on-primary-container);
    
    .office-editing-file-extension-promo-badge {
      background: var(--ddocs-error);
      border: none;
      height: 6px;
      right: -4px;
      top: -2px;
      width: 6px;
    }
  }
  .docs-grille-gm3 .docs-gm-promo.jfk-bubble.jfk-bubble-promo.office-document-warning-callout-bubble /* Some PowerPoint features can’t be displayed… */ {
    background-color: var(--ddocs-surface-container);
    
    .jfk-bubble-arrowup {
      .jfk-bubble-arrowimplbefore {
        background: var(--ddocs-surface-container);
      }
      .jfk-bubble-arrowimplafter {
        border-color: var(--ddocs-surface-container) transparent;
      }
    }
    .office-document-warning-callout-bubble-text {
      color: var(--ddocs-on-surface);
    }
    .office-document-warning-callout-bubble-button-container {
      padding: 0 16px 8px;
      .goog-button {
        .common-button(@type: "text");
        line-height: 2.5rem;
        margin: 0;
        outline: none;
        padding: 0 .75rem;
      }
    }
  }
  .docs-grille-gm3 .docs-gm-promo.jfk-bubble.jfk-bubble-promo.office-document-state-bubble /* Office-formatted file */ {
    background: var(--ddocs-surface-container);
    
    .jfk-bubble-arrowup {
      .jfk-bubble-arrowimplbefore {
        background: var(--ddocs-surface-container);
      }
      .jfk-bubble-arrowimplafter {
        border-color: var(--ddocs-surface-container) transparent;
      }
    }
    
    .office-document-state-bubble-title {
      color: var(--ddocs-on-surface);
    }
    .office-document-state-bubble-info-20 {
      filter: var(--white-icons);
    }
    .office-document-state-bubble-description {
      color: var(--ddocs-on-surface-variant);
    }
    
    .office-document-state-bubble-no-warning-container {
      background: var(--ddocs-surface-container-high);
      
      .office-document-state-bubble-check-circle-outline-dark-grey-20 {
        filter: var(--white-icons);
      }
      .office-document-state-bubble-no-warning-text {
        color: var(--ddocs-on-surface);
      }
    }
    .office-document-state-bubble-has-warnings-container-punch {
      background: var(--ddocs-warning-container);
      color: var(--ddocs-on-warning-container);
      padding-bottom: .5rem;
      
      .office-document-state-bubble-warning-20 {
        filter: invert() brightness(.8) sepia();
      }
      .office-document-state-bubble-has-warnings-text-container {
        padding-bottom: 0;
      }
      .office-document-state-bubble-see-details-button {
        .common-button(@role: "warning"; @type: "text");
        line-height: 40px;
        margin-right: 0;
        outline: none;
        padding: 0 .75rem;
      }
    }
  }
  
  #docs-parent-collections-container-outer /* in My Drive, &c (while changing file name) */ {
    .docs-parent-collections-container-prefix, .docs-parent-collections-container-text {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-parent-collections-container {
      .states(@role: "surface");
      
      .docs-icon-img {
        .on-surface-icon();
      }
      .docs-parent-collections-container-folder-name {
        color: inherit;
      }
    }
  }
  
  // Star, move, status
  #docs-titlebar .docs-titlebar-badges {
    #docs-star, #docs-folder, #docs-save-indicator-badge {
      .icon-button();
      border-radius: 50cqmin;
      &:has(.docs-icon-star-filled-20-blue600) {
        .icon-button(@role: "primary");
      }
      &:has(.docs-titlebar-badge-selected) {
        background-color: var(--ddocs-on-surface-variant-pressed);
        .animate-ripple();
      }
      
      .docs-save-indicator-icon {
        background: none;
      }
    }
    .docs-save-indicator-caption /* “Saved to Drive, etc” */ {
      color: var(--ddocs-on-surface-variant);
    }
  }
  
  // Collaborators
  .docs-grille-gm3 .docs-material .docs-presence-plus-widget-collabs .docs-presence-plus-collab-widget-container {
    .docs-presence-plus-collab-widget-color-block {
      background-color: var(--ddocs-background);
      transition: var(--off);
    }
    &:hover .docs-presence-plus-collab-widget-color-block {
      border-color: var(--ddocs-outline);
      transition: var(--on);
    }
    &:focus .docs-presence-plus-collab-widget-color-block {
      border-color: var(--ddocs-primary);
    }
  }
  .docs-gm.docs-grille-gm3 .docs-material :is(.docs-chat.jfk-button, .docs-presence-plus-widget-overflow-button) {
    .states(@role: "primary-container");
    
    .docs-icon-chat-person-wide-grey900 {
      filter: brightness(10) opacity(.8);
    }
    .goog-flat-menu-button-caption {
      color: inherit;
    }
    
    .docs-chat-badge {
      background-color: var(--ddocs-primary);
    }
  }
  body.docs-grille-gm3 .docs-chat-message-tooltip-container /* When someone sends you a chat message */ {
    background-color: var(--ddocs-surface-container-high);
    border-color: transparent;
    box-shadow: none;
    color: var(--ddocs-on-surface);
    & .docs-chat-message-tooltip-content {
      color: var(--ddocs-on-surface);
    }
  }
  
  // Revision history, comment history, slideshow, share
  #docs-titlebar-container .docs-titlebar-buttons {
    #docs-revisions-appbarbutton {
      .icon-button();
    }
    #docs-docos-commentsbutton.jfk-button {
      color: var(--ddocs-on-surface-variant);
      transition: var(--off);
      &.jfk-button-hover {
        background-color: var(--ddocs-on-surface-variant-hover);
        transition: var(--on);
      }
      &:focus, &.jfk-button-focused {
        background-color: var(--ddocs-on-surface-variant-focus);
      }
      &.jfk-button-checked {
        background-color: var(--ddocs-on-surface-variant-pressed);
        .animate-ripple();
      }
      .docs-icon-comment-topbar-24 {
        filter: var(--white-icons);
      }
    }
    & #punch-start-presentation-left {
      background-color: transparent;
      border-color: var(--ddocs-outline) !important;
      border-radius: 50cqh 0 0 50cqh !important;
      color: var(--ddocs-on-surface);
      transition: var(--off);
      
      &:hover {
        background-color: var(--ddocs-on-surface-hover);
        transition: var(--on);
        &+#punch-start-presentation-right {
          background-color: var(--ddocs-on-surface-hover);
          border-color: var(--ddocs-outline) !important;
          transition: var(--on);
        }
      }
      &:focus {
        background-color: var(--ddocs-on-surface-focus);
        border-color: var(--ddocs-outline) !important;
      }
      &:focus+#punch-start-presentation-right {
        background-color: var(--ddocs-on-surface-focus);
        border-color: var(--ddocs-outline) !important;
      }
    }
    & #punch-start-presentation-right {
      .common-button(@type: "outlined");
      border-color: var(--ddocs-outline) !important;
      border-radius: 0 50cqh 50cqh 0 !important;
      color: var(--ddocs-on-surface) !important;
      
      &:focus {
        background-color: var(--ddocs-on-surface-focus) !important;
        border-color: var(--ddocs-outline) !important;
      }
      
      &>.goog-flat-menu-button-dropdown {
        border-color: var(--ddocs-on-surface-variant) transparent;
      }
    }
    & #docs-titlebar-share-client-button>.jfk-button {
      .common-button(@type: "filled tonal", @role: "secondary");
      & .apps-share-sprite {
        filter: invert() hue-rotate(180deg) brightness(95%);
      }
    }
  }
  .docs-grille-gm3 #docs-meet-in-editors-entrypointbutton.goog-flat-menu-button {
    .icon-button();
    
    .goog-flat-menu-button-dropdown {
      border-color: var(--ddocs-on-surface-variant) transparent;
    }
  }
  
  // Comment box
  .docs-grille-gm3 .docs-docos-activitybox {
    background: var(--ddocs-surface-container-low);
    border: none;
    border-radius: var(--ddocs-corner-m);
    box-shadow: var(--ddocs-level2);
    
    .docos-streampane-header {
      background: var(--ddocs-surface-container-high);
      border-bottom: none;
      border-radius: var(--ddocs-corner-m) var(--ddocs-corner-m) 0 0;
      box-sizing: border-box;
      height: 4rem;
      max-height: unset;
      padding: 0 0.5rem 0 1.25rem;
      .docos-comment-text.docos-comment-header-title {
        color: var(--ddocs-on-surface);
        font-weight: 400;
      }
      .docos-filter-settings .docs-material-menu-button-flat-default {
        .filter-chip();
        .docs-icon-check {
          content: url(https://ssl.gstatic.com/docs/common/material_common_sprite552_blue.svg);
        }
      }
      .docs-material-button-flat-default {
        color: var(--ddocs-on-surface-variant);
        &.docs-material-button-hover {
          background-color: var(--ddocs-on-surface-variant-hover);
          transition: var(--on);
        }
        &.docs-material-button-focused {
          background-color: var(--ddocs-on-surface-variant-focus);
        }
        
        .docs-material-button-ripple-element {
          background-color: if(@ripples = 1, var(--ddocs-on-surface-variant-pressed), transparent);
        }
        .docos-search-comments-icon-path {
          fill: var(--ddocs-on-surface-variant);
        }
        .docos-streampane-subscription-settings-icon-size {
          margin: 4px;
        }
        .docs-icon-notifications-24 {
          filter: var(--white-icons) opacity(.92);
        }
      }
      .docos-subscription-settings-button .docs-material-button-flat-default {
        line-height: unset; // To stop the icon from shifting when focused
      }
      .docos-new-comment-button {
        .icon-button();
        background-clip: content-box;
        height: 40px;
        width: 40px;
        .docos-ns-caption {
          position: relative;
          top: 1.5px;
        }
        .docos-new-comment-icon-path {
          fill: var(--ddocs-on-surface-variant);
        }
      }
    }
    .docos-streampane-searchbar-container /* Search bar container */ {
      background-color: var(--ddocs-surface-container-high);
      border: none;
      padding: 0 1rem 10px;
      
      .docos-streampane-search-input {
        background-color: var(--ddocs-surface-container-highest);
        border-color: transparent;
        border-radius: 18px;
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        height: 32px;
        transition: var(--off);
        &:hover {
          border-color: var(--ddocs-on-surface);
          transition: var(--on);
        }
        &:focus {
          border-color: var(--ddocs-primary);
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }
        &::placeholder {
          color: var(--ddocs-on-surface-variant);
        }
      }
      .docos-streampane-searchbar-close-button {
        margin: 0;
      }
      .docos-streampane-searchbar-close-button .docs-material-button {
        .icon-button();
        border: none;
        height: 32px;
        line-height: 32px;
        margin: 0;
        padding: 0;
        width: 32px;
        
        .docs-material-button-ripple-element {
          background-color: var(--ddocs-on-surface-variant-pressed);
          display: if(@ripples = 1, block, none);
        }
      }
    }
    #docos-stream-view .docos-streamdocoview /* Each comment */ {
      color: var(--ddocs-on-surface);
      outline-color: var(--ddocs-outline-variant);
      .docos-streamdocoview-header-container {
        background-color: var(--ddocs-surface-container);
      }
      &.docos-docoview-active .docos-streamdocoview-header-container {
        background-color: var(--yellow-ripple);
      }
      &.docos-docoview-resolved {
        background-color: var(--ddocs-surface-container);
      }
      .docos-streamdocoview-authorname-timestamp .docos-streamdocoview-author, 
      .docos-streamdocoview-body {
        color: var(--ddocs-on-surface);
      }
      .docos-streamdocoview-authorname-timestamp .docos-streamdocoview-timestamp, 
      .docos-action-text{
        color: var(--ddocs-on-surface-variant);
        opacity: 1;
      }
      .docos-replyview-resolve-button {
        .icon-button(@role: "primary");
        .docs-icon-check-p40-24x24 {
          filter: var(--ddocs-primary-icon) !important;
        }
      }
      .docos-docomenu-dropdown {
        .icon-button();
        .docos-icon-overflow-three-dots-size {
          filter: invert();
        }
      }
      .docos-input-textarea {
        background-color: var(--ddocs-surface-container-highest);
        color: var(--ddocs-on-surface);
        &::selection {
          background-color: var(--ddocs-primary);
          color: var(--ddocs-on-primary);
        }
      }
    }
  }
  #docos-shadow /* Delete comment? (This also applies to comments beside the slide so that’s why it’s outside of the comments box) */ {
    backdrop-filter: blur(2px);
    background-color: color-mix(in srgb, var(--ddocs-surface-container-low), transparent 8%);
    border-radius: var(--ddocs-corner-m);
    display: grid;
    place-items: center;
    .docos-shadow-contents .jfk-button {
      backdrop-filter: blur(8px);
      &.jfk-button-hover {
        background-color: var(--ddocs-primary-hover);
      }
      &.jfk-button-focused {
        background-color: var(--ddocs-primary-focus);
      }
      &#docos-shadow-confirm {
        .common-button(@role: "error"; @type: "outlined");
      }
    }
  }
  
  // Menubar
  #docs-menubar .goog-control {
    color: var(--ddocs-on-surface);
    .states();
    &.goog-control-disabled {
      color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%);
    }
  }
  
  // Snackbar
  .docs-grille-gm3 .jfk-butterBar, 
  .docs-grille-gm3 .jfk-butterBar-error, 
  .docs-grille-gm3 .jfk-butterBar-info, 
  .docs-grille-gm3 .jfk-butterBar-warning {
    background-color: var(--ddocs-inverse-surface);
    color: var(--ddocs-inverse-on-surface);
    
    .docs-butterbar-dismiss, .docs-butterbar-link {
      color: #0b57d0 !important;
      transition: var(--off);
      &:hover {
        background-color: color-mix(in srgb, #0b57d0, transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
        transition: var(--on);
      }
      &:focus {
        background-color: color-mix(in srgb, #0b57d0, transparent calc(100% - var(--ddocs-focus-state-layer-opacity)));
      }
      &:active {
        background-color: color-mix(in srgb, #0b57d0, transparent calc(100% - var(--ddocs-pressed-state-layer-opacity)));
        .animate-ripple();
      }
    }
    
    .apps-share-sprite.share-butter-icon {
      filter: invert();
    }
  }
  
  // Toolbar
  #docs-bars #docs-toolbar-wrapper.docs-main-toolbars {
    background-color: var(--ddocs-surface-container);
    
    #docs-omnibox-toolbar:not(:has(.assisted-actions-toolbar-omnibox)) /* Search bar container */ {
      margin-left: -1px;
      padding-left: 0;
      
      .docs-omnibox-autocomplete {
        margin-top: 5px;
        margin-bottom: 4px;
        
        .docs-omnibox-input {
          background-color: var(--ddocs-surface-container-highest);
          border-left-width: 0;
          border-right-width: 0;
          border-radius: 14px;
          box-shadow: none;
          caret-color: var(--ddocs-primary);
          color: var(--ddocs-on-surface);
          &[aria-expanded="true"] {
            border-radius: 14px 14px 0 0;
          }
          &::placeholder {
            color: var(--ddocs-on-surface-variant);
          }
        }
      }
    }
    #docs-omnibox-toolbar.assisted-actions {
      .docs-omnibox-autocomplete {
        margin: 4px 1px;
        padding: 0;
        @media screen and (max-width: 1600px) {
          &:not(:focus-within) {
            width: 30px;
            .docs-icon {
              margin: 5px;
            }
          }
          &:focus-within {
            margin-left: -2px;
            .docs-icon {
              margin-top: 5px;
            }
          }
        }
        @media screen and (min-width: 1600px) {
          margin-left: -2px;
          .docs-icon {
            margin-top: 5px;
          }
        }
      }
      .docs-icon-search-20 {
        .on-surface-variant-icon();
      }
      .docs-omnibox-input {
        background-color: var(--ddocs-surface-container-highest);
        border: none;
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        height: 30px;
        transition: var(--off);
        @media screen and (max-width: 1600px) {
          background: none;
          min-width: unset;
          &:not(:focus) {
            padding: 0;
            width: 30px;
            &::placeholder {
              opacity: 0;
            }
          }
          &:hover {
            background-color: var(--ddocs-on-surface-variant-hover);
            transition: var(--on);
          }
        }
        &:focus {
          background-color: var(--ddocs-surface-container-highest);
          border-radius: 15px 15px 0 0;
          box-shadow: none;
        }

        &::placeholder {
          color: var(--ddocs-on-surface-variant);
        }
      }
      .ac-renderer .docs-icon {
        top: 6px;
      }
    }
    #docs-omnibox-toolbar .ac-renderer {
      background-color: var(--ddocs-surface-container-highest);
      border: none;
      border-top: 1px solid var(--ddocs-outline);
      border-radius: 0 0 15px 15px;
      box-shadow: none;
      font-family: Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
      overflow: auto;

      .ac-row {
        color: var(--ddocs-on-surface);
        transition: var(--off);
        &.ac-active {
          background-color: var(--ddocs-on-surface-hover);
          transition: var(--on);
        }
        &:active {
          .animate-ripple();
        }

        .docs-icon.goog-option-selected {
          background: no-repeat url(//ssl.gstatic.com/docs/common/material_common_sprite477.svg) 0 -1056px;
          filter: invert() opacity(.8);
        }
        .docs-icon-img {
          .on-surface-variant-icon();
        }
        .goog-menuitem {
          color: var(--ddocs-on-surface);
        }
        .goog-menuitem-accel {
          color: var(--ddocs-on-surface-variant);
        }
      }
    }
    
    .goog-toolbar-combo-button {
      background: none;
      color: var(--ddocs-on-surface);
      transition: var(--off);
      &:hover {
        transition: var(--on);
      }
      &:focus-within {
        border: 1px solid var(--ddocs-primary) !important;
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        margin: 0 3px;
      }
      &#zoomSelect {
        margin: 5px 1px !important;
        &.goog-toolbar-combo-button-hover {
          background-color: var(--ddocs-on-surface-hover);
        }
        &.goog-toolbar-combo-button-open {
          background-color: var(--ddocs-on-surface-pressed);
          border-color: var(--ddocs-primary) !important;
        }
        .docs-icon-img {
          filter: var(--white-icons);
        }
      }
      &#fontSizeSelect {
        border-color: var(--ddocs-outline) !important;
        &:hover {
          border-color: var(--ddocs-on-surface) !important;
        }
        &:focus-within {
          border-color: 1px solid var(--ddocs-primary) !important;
        }
      }
      &.goog-toolbar-combo-button-disabled {
        color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%) !important;
      }
      
      & .goog-toolbar-combo-button-input {
        caret-color: var(--ddocs-primary);
        color: currentColor;
        &::selection {
          background-color: var(--ddocs-primary);
          color: var(--ddocs-on-primary);
        }
      }
    }
    
    #docs-access-level-indicator.goog-flat-menu-button /* “View only” button */ {
      .states(@role: "primary-container");
      box-shadow: none;
      &.goog-flat-menu-button-open {
        background-color: var(--ddocs-on-primary-container-hover);
        .animate-ripple();
      }
      .docs-icon-img {
        filter: var(--ddocs-on-primary-container-icon);
      }
      .goog-flat-menu-button-caption {
        color: inherit;
      }
    }
  }
  :is(#lineButton, #arrowButton, #bentConnectorButton, #curvedConnectorButton, #curveButton, #polygonButton, #scribbleButton) .docs-icon-img-container /* Line icon is weird */ {
    opacity: 95%;
  }
  .docs-grille-gm3 #docs-align-palette /* Text align menu */ {
    background-color: var(--ddocs-surface-container-high);
    
    & .goog-palette-table {
      border-collapse: unset;
      border-spacing: 2px;
    }
    
    & .goog-palette-cell {
      border-radius: var(--ddocs-corner-xs);
      color: var(--ddocs-on-surface);
      transition: var(--off);
      &.goog-palette-cell-hover {
        background-color: var(--ddocs-on-surface-hover);
        transition: var(--on);
      }
      &.goog-palette-cell-selected {
        background-color: var(--ddocs-primary-container);
        color: var(--ddocs-on-primary-container);
        &.goog-palette-cell-hover {
          background-color: var(--ddocs-on-primary-container-hover);
        }
      }
    }
    & .goog-palette-active .goog-palette-cell-hover {
      background-color: var(--ddocs-on-surface-pressed);
      .animate-ripple();
    }
    & .goog-palette-active .goog-palette-cell-hover.goog-palette-cell-selected {
      background-color: var(--ddocs-on-primary-container-pressed);
    }
    
    .docs-icon {
      padding: 0 2px 1px 0;
    }
    .goog-palette-cell:not(.goog-palette-cell-selected) .docs-icon-img {
      .on-surface-variant-icon();
    }
    .goog-palette-cell.goog-palette-cell-selected .docs-icon-img {
      filter: var(--ddocs-on-primary-container-icon);
    }
  }
  .docs-grille-gm3 .docs-toolbar-more-bubble /* Truncated toolbar items */ {
    background-color: var(--ddocs-surface-container);
    box-shadow: var(--ddocs-level1);
    
    .docs-toolbar-more-toolbar {
      background: none;
    }
  }
  
  #docs-printpreview {
    #docs-printpreview-toolbar {
      background-color: var(--ddocs-surface-container);
      border: none;
      border-radius: 24px;
      margin: 6px 16px 0;
      min-height: 40px;
      padding-left: 3px;
      
      :is(.goog-toolbar-button, .goog-toolbar-menu-button) {
        .states(@role: "surface-variant");
        border: none;
        border-radius: 16px;
        box-sizing: border-box;
        font: 500 14px Google Sans, Roboto, sans-serif;
        height: 32px;
        line-height: 32px;
        margin: 4px 1px;
        padding: 0 12px;
        transition: var(--off);
        &.goog-toolbar-button-checked {
          .states(@role: "primary-container");
        }
        &.goog-toolbar-select .goog-toolbar-menu-button-caption {
          margin-left: 0;
        }
        &.docs-toolbar-text-button .goog-toolbar-button-outer-box {
          padding: 0;
        }
        &.goog-toolbar-menu-button-disabled {
          background: none !important;
          color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%) !important;
          .docs-icon-arrow-dropdown {
            opacity: 38%;
          }
        }
        .docs-icon-arrow-dropdown {
          filter: var(--white-icons);
        }
      }
      .goog-toolbar-separator {
        border-color: var(--ddocs-outline-variant);
        margin: 10px 3px;
      }
      #docs-printpreview-print {
        .docs-icon {
          top: -1px;
        } 
        .docs-icon-print {
          filter: var(--white-icons);
        }
        .goog-toolbar-menu-button-caption {
          margin-left: 4px;
        }
      }
    }
    .docs-printpreview-frame-backing {
      background: var(--ddocs-background);
    }
  }
}

@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Main editor
  
  // Background delete
  body {
    background-color: var(--ddocs-background);
    color: var(--ddocs-on-surface);
  }
  .docs-grille-gm3 #docs-chrome:not(.docs-hub-chrome), .docs-grille-gm3 #docs-header:not(.docs-hub-appbar) .docs-titlebar-buttons /* Top bar */, 
  .docs-grille-gm3 #docs-editor, .docs-grille-gm3 #docs-editor-container, .docs-grille-gm3 .filmstrip, .docs-grille-gm3 #filmstrip-controls, .docs-grille-gm3 #workspace-container, .docs-grille-gm3 #speakernotes-dragger /* Editor */ {
    background: none;
  }
  .docs-grille-gm3 .grid-view .punch-filmstrip-scroll /* Grid view */ {
    background-color: var(--ddocs-background);
  }
  .docs-grille-gm3 #docs-chrome:not(.docs-hub-chrome) {
    border-bottom-color: transparent;
  }
  
  a:link {
    color: var(--ddocs-primary);
  }
  a:visited {
    color: var(--ddocs-secondary);
  }
  
  // Filmstrip
  #filmstrip {
    & .punch-filmstrip-cursor /* Line to indicate where drag and drop slides will go */ {
      fill: var(--ddocs-primary);
    }
    
    & .punch-filmstrip-thumbnail {
      .punch-filmstrip-thumbnail-pagenumber {
        fill: var(--ddocs-on-surface);
      }
      .sketchy-page-comment-indicator-icon path, 
      .punch-filmstrip-indicator path {
        fill: var(--ddocs-on-surface-variant);
      }
      .sketchy-comment-indicator-text {
        fill: var(--ddocs-background);
      }
      & .punch-filmstrip-thumbnail-border {
        stroke: var(--ddocs-outline-variant);
        transition: stroke-width 0.1s, stroke 0.15s;
        &[style*="stroke: rgb(199, 199, 199);"] {
          stroke: var(--ddocs-outline);
        }
        &[style*="stroke: rgb(11, 87, 208);"] {
          stroke: var(--ddocs-primary) !important;
        }
      }
      & .punch-filmstrip-thumbnail-border-inner {
        stroke: var(--ddocs-background);
      }
      path[fill="#fff"][fill-opacity="0.5"][d="M 0 0 L 365760 0 365760 205740 0 205740 Z"] {
        backdrop-filter: blur(4px);
        fill: var(--ddocs-surface);
        &+g image {
          filter: invert();
        }
      }
      .punch-filmstrip-thumbnail-collaborator-clippath circle[fill="#ffffff"] {
        fill: var(--ddocs-background);
      }
    }
    
    & #punch-total-slide-count {
      background-color: var(--ddocs-inverse-surface);
      color: var(--ddocs-inverse-on-surface);
      opacity: 1;
    }
  }
  
  #filmstrip-controls /* Grid view, hide filmstrip buttons */ {
    #grid-view-toggle {
      .icon-button();
      
      path {
        fill: var(--ddocs-on-surface-variant);
      }
    }
    .punch-filmstrip-controls-visibility-toggle-button {
      .icon-button();
      border-radius: 50%;
      
      .punch-filmstrip-visibility-toggle-icon-container {
        background: transparent;
        
        path[fill="#444746"] {
          fill: var(--ddocs-on-surface-variant);
        }
      }
    }
  }
  .filmstrip-collapsed #filmstrip-controls :is(#filmstrip-grid-view-controls-container, #filmstrip-visibility-controls-container) {
    background-color: var(--ddocs-surface-container);
    border-radius: 50cqmin;
    
    &#filmstrip-grid-view-controls-container {
      margin-left: 1rem;
    }
    .punch-filmstrip-controls-grid-view-toggle {
      margin-left: unset;
    }
  }
  
  // Rulers
  .docs-ruler-face-number {
    color: var(--ddocs-on-surface-variant);
  }
  .docs-ruler :is(.docs-ruler-indent-first-line, .docs-ruler-indent-start, .docs-ruler-indent-end) {
    filter: var(--ddocs-primary-icon);
  }
  #sketchy-horizontal-ruler {
    background: none !important;
    border-bottom-color: var(--ddocs-outline-variant);
    
    .docs-ruler-background-inner {
      background: none;
      border-bottom-color: var(--ddocs-outline);
    }
    
    .docs-ruler-face-minor-division {
      border-left-color: var(--ddocs-outline);
    }
  }
  #sketchy-vertical-ruler {
    background: none !important;
    border-right-color: var(--ddocs-outline-variant);
    
    .docs-ruler-background-inner {
      background: none;
      border-right-color: var(--ddocs-outline);
    }
  }
  
  // Slide
  #canvas:is(.canvas-horiz-border, .canvas-vert-border) {
    background: $border-color;
    border-color: var(--ddocs-outline-variant);
  }
  .punch-animation-preview-pane /* When playing animations */ {
    background: transparent !important;
  }
  
  // Controls overlaid on slide
  .sketchy-auto-fit-contextual-menu-container /* Autofit text */ {
    .goog-toolbar-menu-button {
      background-color: var(--ddocs-surface-container);
      box-shadow: var(--ddocs-level2);
    }
    .goog-custom-button .goog-toolbar-menu-button-outer-box {
      color: var(--ddocs-on-surface-variant);
      transition: var(--off);
      .docs-icon-img {
        .on-surface-variant-icon();
      }
    }
    .goog-custom-button-hover .goog-toolbar-menu-button-outer-box {
      background-color: var(--ddocs-on-surface-hover);
      transition: var(--on);
    }
    .goog-custom-button-focused .goog-toolbar-menu-button-outer-box {
      background-color: var(--ddocs-on-surface-focus);
    }
    :is(.goog-custom-button-active, .goog-custom-button-hover.goog-custom-button-open) .goog-toolbar-menu-button-outer-box {
      background-color: var(--ddocs-on-surface-pressed);
    }
    .goog-custom-button-open .goog-toolbar-menu-button-outer-box {
      .animate-ripple();
    }
  }
  .docs-grille-gm3 .docs-embedded-content-popup /* Linked object */ {
    background-color: var(--ddocs-surface-container);
    box-shadow: var(--ddocs-level2);
    color: var(--ddocs-on-surface-variant);
    
    .docs-embedded-content-no-update {
      color: var(--ddocs-on-surface);
    }
    .docs-embedded-content-button-divider {
      background-color: var(--ddocs-outline-variant);
    }
    .docs-embedded-content-button-file-chip {
      background-color: var(--ddocs-surface-container-highest);
      color: var(--ddocs-on-surface);
    }
    .docs-embedded-content-button {
      .icon-button();
      outline: none !important;
      border-radius: 50%;
      
      .docs-embedded-content-controls-dropdown-icon, &.docs-embedded-content-contract-button {
        opacity: 1;
      }
    }
  }
  
  // Grid view
  .punch-filmstrip-controls-size-buttons /* Zoom buttons container */ {
    background-color: var(--ddocs-surface-container);
    
    .goog-flat-button {
      border-radius: 50cqmin;
      .states(@role: "surface-variant");
      path {
        fill: var(--ddocs-on-surface-variant);
      }
    }
  }
  
  // Comments
  .docs-grille-gm3 .docos-anchoreddocoview /* Comments */ {
    // Card
    &:not(.docos-docoview-active) {
      .states(@role: "surface-container");
    }
    &.docos-docoview-active {
      background-color: var(--ddocs-surface-container) !important;
    }
    
    // Icon buttons
    .docos-replyview-resolve-button {
      .icon-button(@role: "primary");
      border-radius: 50cqh;
    }
    .docos-docomenu-dropdown {
      .icon-button();
      
      .docos-icon-img {
        filter: invert() brightness(80%);
      }
    }
    
    // Text
    .docos-anchoredreplyview-author {
      color: var(--ddocs-on-surface);
    }
    .docos-anchoredreplyview-timestamp, 
    .docos-action-text, 
    .docos-streamdocoview-timestamp, 
    .docos-anchoredreplyview-body {
      color: var(--ddocs-on-surface-variant);
    }
    
    // Divider between comment and its replies
    .docos-anchoredreplyview {
      border-top-color: var(--ddocs-outline-variant); 
    }
    
    // Show more replies button
    .docos-showrepliesbutton-line {
      border-top-color: var(--ddocs-outline-variant);
    }
    .docos-showrepliesbutton-collapsed-internal-container {
      background-color: var(--ddocs-surface-container);
      transition: var(--off);
      
      .docos-showrepliesbutton-collapsed-internal {
        .common-button(@type: "text");
      }
    }
    &:hover .docos-showrepliesbutton-collapsed-internal-container {
      background-color: color-mix(in srgb, var(--ddocs-surface-container), var(--ddocs-on-surface) var(--ddocs-hover-state-layer-opacity));
      transition: var(--on);
    }
  }
  .docs-grille-gm3 .docos-anchoreddocoview .docos-anchoredreplyview /* Replies */, 
  .docs-grille-gm3 .docos-anchoreddocoview-input-pane /* Text box section */ {
    background: none !important;
  }
  
  // Speaker notes
  #speakernotes-container {
    #speakernotes-dragger {
      --speakernotes-dragger: var(--ddocs-outline);
      &:hover, &.speakernotes-dragger-dragging {
        background: none !important;
        --speakernotes-dragger: var(--ddocs-on-surface-variant);
      }
      & .speakernotes-dragger-thumb {
        background-color: var(--speakernotes-dragger);
      }
    }
    #speakernotes {
      background-color: var(--ddocs-surface-container-low);
      
      #speakernotes-workspace {
        background: none;
        
        .sketchy-text-content .sketchy-text-content-text text[text-rendering="geometricPrecision"] {
          &[style*="fill:#000000;"]:not(:has(*)) /* Black text (special case because it’s the default so I want it to look better */ {
            fill: var(--ddocs-on-surface) !important;
          }
          &[style*="fill:#2200CC;"]:not(:has(*)) /* Default link text */ {
            fill: var(--palerblue) !important;
          }
          &:not(:has(*)):not([style*="fill:#000000;"], [style*="fill:#2200CC;"]) /* Other colours of text (no special case because there’s 256³ colours) */ {
            filter: var(--darkfilter) brightness(1.5);
          }
        }
        .sketchy-text-content .sketchy-text-content-decoration rect /* Underlines */ {
          &[fill="#000000"] {
            fill: var(--ddocs-on-surface);
          }
          &[fill="#2200CC"] /* Link */ {
            fill: var(--palerblue); // Not using M3 tokens because blue links should stay blue no matter what
          }
          &:not([fill="#000000"], [fill="#2200CC"]) {
            filter: var(--darkfilter) brightness(1.5);
          }
        }
        .sketchy-text-background .sketchy-text-background-inner rect[fill] /* Text highlight */ {
          filter: var(--darkfilter) brightness(1.5);
        }
        rect[width="2"][height="17.599999999999998"][shape-rendering="crispEdges"] /* Caret */ {
          &[fill="#000000"] /* Black is default */ {
            fill: var(--ddocs-on-surface);
          }
          &[fill="#2200CC"] {
            fill: var(--palerblue);
          }
          &:not([fill="#000000"], [fill="#2200CC"]) {
            filter: var(--darkfilter) brightness(1.2);
          }
        }
        .sketchy-text-find-match-overlay /* Ctrl+F found text in speaker notes */ {
          fill: var(--ddocs-tertiary-container);
        }
      }
    }
  }  
  
  // Voice typing
  #docs-palette-dictation {
    .docs-mic-palette {
      background-color: var(--ddocs-surface-container);
      border-radius: var(--ddocs-corner-m);
      box-shadow: var(--ddocs-level2);

      .docs-palette-title-bar {
        background: none;
        border: none;

        .docs-palette-close {
          border-top-right-radius: var(--ddocs-corner-m);
          .states(@role: "surface-variant");
          &:focus {
            outline: none;
          }
        }
        .docs-palette-close-icon, .docs-palette-grippy-icon {
          opacity: 1;
          * {
            fill: var(--ddocs-on-surface-variant);
          }
        }
      }
      .goog-flat-menu-button {
        background: none;
        border: none;
        width: 100%;
        .states();

        .goog-flat-menu-button-caption {
          color: var(--ddocs-on-surface);
        }
        .goog-flat-menu-button-dropdown {
          border-color: var(--ddocs-on-surface-variant) transparent;
        }
      }
      .docs-palette-body {
        background: none;
        border: none;
        border-radius: 0 0 var(--ddocs-corner-m) var(--ddocs-corner-m);
        &.docs-mic-palette-body-hover {
          box-shadow: none;
        }

        .docs-mic-control {
          .docs-mic-button {
            border: none;
          }
          &:not(.docs-mic-control-recording) {
            .states();
            border-radius: inherit;
          }
          &.docs-mic-control-recording {
            .docs-mic-button {
              background-color: var(--ddocs-error-container);
            }
            .docs-mic-svg-icon path {
              fill: var(--ddocs-on-error-container);
            }
          }
        }
        .docs-mic-svg-icon path, 
        .docs-mic-palette-help path:not([fill*="none"]) {
          fill: var(--ddocs-on-surface);
        }
      }
    }
    
    .docs-voice-mic-bubble /* Click to speak tooltip */ {
      background-color: var(--ddocs-inverse-surface);
      border-radius: var(--ddocs-corner-xs);
      box-shadow: none;
      color: var(--ddocs-inverse-on-surface);
      height: 24px;
      line-height: $height;
      padding: 0 8px;
      
      .jfk-bubble-arrow * {
        border-color: var(--ddocs-inverse-surface) transparent;
      }
    }
  }
  
  .punch-filmstrip-widget-container {
    background-color: var(--ddocs-surface-container);
    color: var(--ddocs-on-surface);
    
    .punch-filmstrip-widget-button {
      .icon-button();
    }
  }
  
  .doc-previews-mole /* Opened preview from a link to a file */ {
    background-color: var(--ddocs-surface-container-low);
    box-shadow: var(--ddocs-level1);
    
    .doc-previews-mole-header {
      background: none;
      border-bottom-color: var(--ddocs-outline-variant);
      
      .doc-previews-mole-header-text {
        color: var(--ddocs-on-surface);
      }
      
      .doc-previews-mole-button {
        .icon-button();
      }
    }
  }
}

@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Version control
  #docs-chrome-cover .docs-revisions-chromecover-content-color-default {
    background: var(--ddocs-background);
    color: var(--ddocs-on-background);
    
    .docs-revisions-chromecover-titlebar {
      gap: 4px;
      padding-left: 8px;
      
      .docs-revisions-chromecover-titlebar-button-back-container {
        min-width: unset;
      }
    }
    
    .docs-revisions-chromecover-titlebar-button-back {
      .icon-button();
      background-clip: content-box;
      border-radius: 50%;
      height: 40px;
      left: unset;
      padding: 4px;
      top: 1px;
      width: 40px;
      
      .docs-icon {
        margin: 8px 11px 9px 8px;
        padding: 0;
      }
    }
    .docs-revisions-chromecover-titlebar-button-action {
      .common-button(@role: "secondary"; @type: "filled tonal");
    }
  }
  #docs-toolbar-iterator-label {
    color: var(--ddocs-on-surface);
  }
  .docs-gm #docs-revisions-sidebar {
    background: var(--ddocs-surface);
    border-left: 1px solid var(--ddocs-outline-variant);
    box-shadow: none;
    
    .docs-revisions-sidebar-header {
      background-color: var(--ddocs-surface-container);
      border: none;
      color: var(--ddocs-on-surface);
      transition: background-color 0.2s;
      &:has(~.docs-revisions-sidebar-revisions-empty-container>.docs-revisions-sidebar-revisions-empty-named:not([style*="display: none;"])) {
        background: none;
      }
    }
    
    .docs-revisions-sidebar-revisions-empty-named /* No named versions */ {
      &>.docs-revisions-sidebar-revisions-empty-title {
        color: var(--ddocs-on-surface);
      }
      &>.docs-revisions-sidebar-revisions-empty-details {
        color: var(--ddocs-on-surface-variant);
      }
      &>.docs-revisions-sidebar-revisions-empty-learn-more {
        color: var(--ddocs-primary);
      }
    }
    .docs-revisions-sidebar-date-group {
      background: none;
      border-color: var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface-variant);
      text-transform: unset;
    }
    .docs-revisions-tile {
      &:not(.docs-revisions-tile-selected) {
        .states();
      }
      &.docs-revisions-tile-selected {
        background-color: var(--ddocs-secondary-container);
        color: var(--ddocs-on-secondary-container);
      }
      
      .docs-revisions-tile-arrow-button {
        .icon-button();
        border-radius: 50%;
        .docs-revisions-icon-arrow::before {
          filter: invert() opacity(.8);
        }
      }
      .docs-revisions-tile-text-box {
        border-radius: var(--ddocs-corner-xs);
        color: inherit;
        &:hover {
          border-color: currentColor;
          transition: var(--on);
        }
        &.docs-revisions-tile-text-box-focused {
          border-color: var(--ddocs-primary);
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }
        &::selection {
          background-color: var(--ddocs-secondary);
          color: var(--ddocs-on-secondary);
        }
      }
      .docs-revisions-tile-menu-button {
        .icon-button();
        border-radius: 50%;
        &::before {
          display: none;
        }
        .docs-revisions-icon-overflow {
          filter: invert() opacity(.8);
        }
      }
      .docs-revisions-tile-descriptor, .docs-revisions-tile-collaborator-name {
        color: var(--ddocs-on-surface-variant);
      }
      &.docs-revisions-tile-selected :is(.docs-revisions-tile-descriptor, .docs-revisions-tile-collaborator-name) {
        color: inherit;
      }
    }
    .docs-revisions-tile-content-wrapper {
      border-color: var(--ddocs-outline-variant);
    }
    .docs-revisions-sidebar-actions {
      border-top-color: var(--ddocs-outline-variant);
    }
  }
}
@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Menus
  
  // Layouts
  .goog-palette.punch-layouts-palette {
    overflow-y: unset !important;
    
    .goog-palette-cell {
      .docs-preview-palette-item {
        border-color: transparent;
        border-radius: var(--ddocs-corner-m);
        overflow: hidden;
        padding: 0;
        transition: var(--off);
      }
      &.goog-palette-cell-hover:not(.goog-palette-cell-selected) {
        .docs-preview-palette-item {
          border-color: var(--ddocs-on-surface-variant);
          transition: var(--on);
        }
      }
    }
    .goog-palette-cell-selected {
      .docs-preview-palette-item {
        border: 1px solid var(--ddocs-primary);
        margin: 1px;
        outline: 2px solid var(--ddocs-primary);
        outline-offset: -1px;
      }
      .punch-layouts-palette-label {
        background-color: transparent;
      }
    }
    &.goog-palette-active .goog-palette-cell-hover:not(.goog-palette-cell-selected) .docs-preview-palette-item {
      outline: 1px solid var(--ddocs-on-surface-variant);
      outline-offset: -2px;
    }
  }
  
  // Shape menu and table border select menu
  .goog-menu:has(.rectangle-icon):has(.callout-icon) .docs-icon-img-container {
    filter: brightness(2.1) saturate(0);
  }
  .goog-menu.ia-tight-menu .shape-palette, 
  .goog-menu .clean-palette:has(.docs-icon-border-all) {
    .goog-palette-cell {
      border-radius: 50cqmin;
      outline: 6px solid transparent;
      transition: var(--off), outline 0.25s ease;
    }
    .goog-palette-cell-hover {
      background: var(--ddocs-on-surface-hover);
      outline: 6px solid $background;
      transition: var(--on), outline 0.02s ease-in;
    }
    .goog-palette-cell-selected, 
    &.goog-palette-active .goog-palette-cell-hover {
      background: var(--ddocs-on-surface-pressed);
      outline: 6px solid $background;
    }
    .shape-icon {
      filter: contrast(50%) sepia() invert() hue-rotate(-23deg) saturate(7%) brightness(1.9);
    }
  }
  .goog-menu .clean-palette:has(.docs-icon-border-all) .docs-icon-img {
    .on-surface-variant-icon();
  }
  
  .goog-menu {
    &:has(.sketchy-icon-line):has(.sketchy-icon-scribble) /* Insert line */, 
    &:has(.sketchy-icon-join-round) /* Border decoration */ {
      .docs-icon-img-container {
        filter: brightness(2.8) saturate(.5);
      }
    }
  }
  
  // Font menu
  .docs-fontmenu .goog-menuitem.goog-menuitem-disabled .goog-menuitem-content:has(.docs-fonts-section-header) {
    opacity: 1;
    
    .docs-fonts-section-header {
      color: var(--ddocs-on-surface-variant);
    }
  }
  
  // Colour menu
  .docs-gm .docs-colormenuitems {
    &.sketchy-gradientmenuitems .sketchy-fill-type-state-change-button.jfk-button {
      background: none;
      color: var(--ddocs-on-surface-variant);
      transition: var(--off);
      &.jfk-button-hover {
        background-color: var(--ddocs-on-surface-hover);
        color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &.jfk-button-active {
        background-color: var(--ddocs-on-surface-pressed);
        .animate-ripple();
      }
      &.jfk-button-checked {
        border-bottom-color: var(--ddocs-primary);
        color: var(--ddocs-primary);
        &.jfk-button-hover {
          background-color: var(--ddocs-primary-hover);
          transition: var(--on);
        }
        &.jfk-button-active {
          background-color: var(--ddocs-primary-pressed);
        }
      }
    }
    .docs-colormenuitems-custom-header, .docs-colormenuitems-scheme-header, 
    &.sketchy-gradientmenuitems :is(.goog-menuheader, .sketchy-gradientmenuitems-custom-header) {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-customcolorpalette-add-custom-color-button, .docs-customcolorpalette-eyedropper-button {
      .icon-button();
      border-radius: 4px;
    }
    .docs-material-colorpalette-cell .docs-material-colorpalette-colorswatch {
      border-radius: 50%;
      transition: 0.2s border-radius, transform 0.2s;
    }
    .docs-material-colorpalette-cell.docs-material-colorpalette-cell-hover .docs-material-colorpalette-colorswatch {
      border-radius: 4px;
      box-shadow: var(--ddocs-level2);
      transform: scale(125%);
      z-index: 1; // This all makes a better effect than a white glow. 
    }
    &.colormenuitems-ob-order .goog-menuitem.colormenuitems-no-color /* Transparent */ {
      border-color: var(--ddocs-outline);
      &.goog-menuitem-disabled {
        border-color: var(--ddocs-on-surface-disabled);
      }
    }
  }
  
  // Table insert size menu
  .goog-menu>.goog-dimension-picker {
    .goog-dimension-picker-unhighlighted,
    .goog-dimension-picker-highlighted {
      filter: invert(100%) hue-rotate(180deg) contrast(80%) brightness(200%); // Table size menu fix
    }
    .goog-dimension-picker-status {
      color: var(--ddocs-on-surface-variant);
    } 
  }
  
  // Border dash
  .goog-menu .dashing-icon {
    filter: invert() opacity(80%);
  }
  
  // Linked object menu
  .goog-menu .docs-embedded-content-controls-menu-item .docs-embedded-content-controls-menu-item-content-icon {
    opacity: 80%;
    .docs-icon-img {
      filter: invert() !important;
    }
  }
  
  // Apply checkmark fix
  body.docs-grille-gm3 {
    .goog-menu {
      & .goog-option-selected {
        .checkmark-fix();
        & .goog-menuitem-checkbox {
          left: 9px;
        }
      }
    }
  }
}

@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Dialogs
  .docs-gm .modal-dialog, .docs-material-gm-dialog {
    background: var(--ddocs-surface-container);
    box-shadow: var(--ddocs-level3);
    border: none;
    border-radius: var(--ddocs-corner-xl);
    color: var(--ddocs-on-surface);
    
    // Titlebar
    .modal-dialog-title, .docs-material-gm-dialog-title-text {
      background: transparent;
      color: inherit;
    }
    .modal-dialog-title-text {
      color: inherit;
    }
    .modal-dialog-title-close {
      .states();
      opacity: 1;
      
      &::after {
        filter: invert(90%);
      }
    }
    .docs-material-gm-dialog-title-close {
      .icon-button();
      box-sizing: border-box;
      height: 2rem;
      padding: 0.25rem;
      top: 22px;
      width: 2rem;
    }
    
    // Content
    .modal-dialog-content, .docs-material-gm-dialog-content {
      background: transparent;
      color: inherit;
      
      a {
        color: var(--ddocs-primary);
      }
    }
  }
  
  // Colour dialog
  .docs-grille-gm3 .docs-material-gm-dialog.color-dialog {
    .docs-material-color-picker-saturation-value-background {
      border-color: transparent;
    }
    .docs-material-color-picker-dragger {
      border: 2px solid var(--ddocs-surface-container);
      box-shadow: none;
      outline: 2px solid var(--ddocs-primary);
    }
    
    .docs-material-color-swatch-checkbox-background, .docs-material-color-slider-checkbox-background {
      filter: invert() brightness(2);
    }
    
    .docs-material-hsv-color-picker-rgba-enabled .docs-material-hsv-color-picker-text {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-material-hsv-color-picker-input {
      .text-field();
    }
  }
  
  // Custom dialog things
  .docs-grille-gm3 :is(.docs-material-gm-dialog, .modal-dialog) {
    // Custom gradient
    &.sketchy-customgradient {
      .sketchy-customgradient-label {
        color: var(--ddocs-on-surface-variant);
      }
      
      .sketchy-customgradient-angle-input-container>.goog-toolbar-combo-button {
        background: none;
        border-color: var(--ddocs-outline) !important;
        transition: var(--off);
        &.goog-toolbar-combo-button-hover {
          border-color: var(--ddocs-on-surface) !important;
          transition: var(--on);
        }
        &.goog-toolbar-combo-button-open {
          border-color: var(--ddocs-primary) !important;
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }
        
        .goog-toolbar-combo-button-input.jfk-textinput {
          border: none !important;
          
          &::selection {
            background-color: var(--ddocs-primary);
            color: var(--ddocs-on-primary);
          }
        }
        .goog-toolbar-combo-button-dropdown {
          .on-surface-variant-icon();
          transition: transform 0.2s;
        }
        &.goog-toolbar-combo-button-open .goog-toolbar-combo-button-dropdown {
          transform: rotate(180deg);
        }
      }
      
      .sketchy-customgradient-slider .goog-slider-thumb {
        border: 2px solid var(--ddocs-surface-container);
        border-radius: 50cqmin;
        outline: 2px solid var(--ddocs-on-surface);
        &::after {
          display: none;
        }
      }
      .sketchy-customgradient-active-slider .goog-slider-thumb {
        outline: 4px solid var(--ddocs-primary);
        box-shadow: none;
      }
    }
    
    // Background options
    .punch-bg-options-content {
      color: inherit;
    }

    .docs-copydocdialog-appsscript-button, 
    .docs-copydocdialog-destination-button /* Copy document file location fields */ {
      border-color: var(--ddocs-outline);
      border-radius: var(--ddocs-corner-xs);
      transition: var(--off);
      &.jfk-button-hover {
        border-color: var(--ddocs-on-surface);
        box-shadow: none;
        transition: var(--on);
      }
      &.jfk-button-clear-outline /* Corresponds to when the file picker is open */ {
        border-color: var(--ddocs-primary);
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
      }
      
      :is(.docs-copydocdialog-appsscript-icon, .docs-copydocdialog-openinnew-icon) path {
        fill: var(--ddocs-on-surface-variant);
      }
      span {
        font: 400 0.875rem Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
      }
    }
    .docs-copydocdialog-appsscript-warning /* Copy document appscript file will also be copied */ {
      background-color: var(--ddocs-warning-container);
      color: var(--ddocs-on-warning-container);
      
      path {
        fill: currentColor;
      }
      .docs-copydocdialog-appsscript-warning-msg {
        color: inherit;
      }
    }
    
    // Publish to the web
    .pub-dialog-content {
      .pub-dialog-info {
        color: var(--ddocs-on-surface-variant);
        
        &.pub-dialog-state-published {
          color: var(--ddocs-primary);
        }
      }
      .pub-dialog-tab-bar {
        border-bottom-color: var(--ddocs-outline-variant) !important;
        
        .goog-tab.pub-dialog-tab {
          border: none !important;
          color: var(--ddocs-on-surface-variant);
          height: 100%;
          transition: var(--off);
          &.goog-tab-hover {
            background-color: var(--ddocs-on-surface-hover) !important;
            color: var(--ddocs-on-surface);
            transition: var(--on);
          }
          &.goog-tab-active {
            background-color: var(--ddocs-on-surface-pressed) !important;
            .animate-ripple();
          }
          &.goog-tab-selected {
            color: var(--ddocs-primary) !important;
            &.goog-tab-hover {
              background-color: var(--ddocs-primary-hover) !important;
            }
            &.goog-tab-active {
              background-color: var(--ddocs-primary-pressed) !important;
            }
          }
          &.goog-tab-selected::after {
            border-radius: 3px 3px 0 0;
            border-top: 3px solid var(--ddocs-primary);
            bottom: 0;
            content: "";
            display: block;
            position: absolute;
            width: inherit;
          }
        }
      }
      .pub-dialog-sep {
        border-top-color: var(--ddocs-outline-variant);
      }
      .pub-dialog-zippy-header {
        color: var(--ddocs-on-surface);
        
        .pub-dialog-settings-zippy-icon {
          filter: invert() opacity(.8);
        }
      }
      #pub-dialog-publish-button:not(.jfk-button-disabled) {
        color: var(--ddocs-primary);
      }
    }
    
    // Document details
    &.docs-details-dialog {
      .docs-details-field {
        color: var(--ddocs-on-surface-variant);
      }
      .docs-details-value {
        color: var(--ddocs-on-surface);
      }
      .docs-icon-folder {
        filter: var(--white-icons);
      }
    }
    
    // Find & replace
    &.docs-findandreplacedialog .docs-findinput-container /* Find field */ {
      background: none;
      border-color: var(--ddocs-outline);
      transition: var(--off);
      &:hover {
        border-color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &.docs-findinput-container-focus {
        border-color: var(--ddocs-primary);
      }
      
      .docs-findinput-input {
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
      }
      .docs-findinput-count {
        color: var(--ddocs-on-surface-variant);
      }
    }
    
    // Edit guides (layout)
    .sketchy-editguidesdialog {
      .sketchy-editguidesdialog-tab-bar /* I wish Google Docs had just one standard tab bar so I wouldn’t need to make bespoke CSS for each tab bar */ {
        .sketchy-editguidesdialog-tab {
          border-bottom-color: transparent;
          color: var(--ddocs-on-surface-variant);
          transition: var(--off);
          &.goog-tab-hover {
            background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
            color: var(--ddocs-on-surface);
            transition: var(--on);
          }
          &.goog-tab-active {
            background-color: color-mix(in srgb, currentColor, transparent calc(100% - var(--ddocs-pressed-state-layer-opacity)));
            color: var(--ddocs-on-surface);
            .animate-ripple();
          }
          &.goog-tab-selected {
            border-bottom-color: currentColor;
            color: var(--ddocs-primary);
          }
        }
      }
      .sketchy-guideslist {
        background: none;
        border-color: var(--ddocs-outline-variant);
        
        .sketchy-guiderow-unit {
          color: var(--ddocs-on-surface-variant);
        }
        .sketchy-guiderow-deletebutton {
          .icon-button();
          border-radius: 50cqmin;
          display: inline-grid;
          height: 2rem;
          place-items: center;
          width: $height;
          
          .goog-flat-button-outer-box {
            padding-left: 1px;
          }
        }
      }
    }
    
    // Insert image by URL
    &.google-url-picker /* Insert Image dialog */ {
      background-color: var(--ddocs-surface-container);
      border: none;
      border-radius: var(--ddocs-corner-xl);
      box-shadow: var(--ddocs-level3);
      color: var(--ddocs-on-surface);
      overflow: hidden; // Crops the image preview (mainly the top corners) so it’s borderless on three sides. 

      /* This is a very weird dialog box that calls for many fixes */

      & .picker-urlview {
        padding: 0;

        .picker-urlview-header {
          color: inherit;
          font-family: "Google Sans", Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
          font-size: 22px;
          font-weight: 400;
          line-height: 28px;
        }
        .picker-urlview-inner-input {
          background: none;
          border: 1px solid var(--ddocs-outline);
          border-radius: var(--ddocs-corner-xs);
          box-sizing: border-box;
          caret-color: var(--ddocs-primary);
          color: var(--ddocs-on-surface);
          font-size: 1rem;
          height: 3.5rem;
          padding: 0 52px 0 1rem;
          transition: var(--off);
          &:hover {
            border-color: var(--ddocs-on-surface);
            transition: var(--on);
          }
          &:focus {
            border-color: var(--ddocs-primary);
            box-shadow: inset 0 0 0 1px var(--ddocs-primary);
          }
          &:has(+.picker-urlview-loading-icon[style="display: none;"]) {
            padding-right: 16px; 
          }
          
          &::placeholder {
            color: var(--ddocs-on-surface-variant);
          }
        }
        .picker-urlview-loading-icon {
          box-sizing: border-box;
          height: 56px;
          left: -36px;
          padding: 0;
          position: relative;
          top: 6px;
          width: 0;
        }

        .picker-urlview-error-container {
          color: var(--ddocs-error);
          margin-top: 4px;
        }
        .picker-urlview-disclaimer-container {
          box-sizing: border-box;
          color: var(--ddocs-on-surface-variant);
          font-size: 12px;
          margin-top: 4px;
          padding: 0;
        }
      }

      &>.picker-urlview-actionbar {
        margin-top: 24px;
        padding: 0;

        .picker-urlview-cancelbutton {
          .common-button(@type: "outlined");
          margin-right: 12px;
          text-transform: capitalize;
        }

        .picker-urlview-insertbutton {
          .common-button(@type: "filled");
          border-color: transparent !important;
          box-sizing: border-box;
          text-transform: capitalize;
        }
      }

      & button.picker-urlview-close-icon /* The button that removes the image preview from the "By URL" image selector. I don’t know why it’s a close button, so I changed it to a back button. */ {
        background-color: var(--ddocs-surface-container-highest);
        border: none !important;
        border-radius: 50cqmin !important;
        display: grid;
        height: 40px;
        left: 0;
        margin: 24px;
        padding: 2px 0 0 !important;
        place-items: center;
        right: auto;
        transition: var(--off);
        width: 40px;
        &:hover {
          background-color: color-mix(in srgb, var(--ddocs-surface-container-highest), var(--ddocs-on-surface-variant-hover) var(--ddocs-hover-state-layer-opacity));
          transition: var(--on);
        }
        &:focus {
          background-color: color-mix(in srgb, var(--ddocs-surface-container-highest), var(--ddocs-on-surface-variant-hover) var(--ddocs-focus-state-layer-opacity));
        }
        &:active {
          box-shadow: none;
        }

        &>svg {
          display: none;
        }
        &::after {
          content: url(https://fonts.gstatic.com/s/i/materialiconsoutlined/arrow_back/v17/24px.svg);
          filter: invert(100%);
        }
      }

      & .picker-urlview-image {
        margin: -25px -24.7px 0;
      }
    }
    
    // Insert special characters
    &.ita-cp-whole-pad /* Insert special characters */ {
      padding: 1.5rem;
      & .modal-dialog-title {
        align-items: center;
        display: flex;
        height: 1.5rem;
        margin-bottom: 1rem;
        &>.modal-dialog-title-text {
          flex-grow: 1;
        }
      }
      & .modal-dialog-title-close {
        border-radius: 50cqmin;
        box-sizing: border-box;
        cursor: pointer;
        display: grid;
        float: right;
        height: 2.5rem;
        left: 8px;
        padding: 0;
        place-items: center;
        position: relative;
        width: $height;
        &::after {
          background: url("https://www.gstatic.com/images/icons/material/system/2x/close_white_24dp.png");
          background-size: contain;
          display: block;
          filter: none; 
          height: 24px;
          position: static;
          width: 24px;
        }
      }
      & .ita-cp-menubar {
        & .jfk-select /* These are effectively filter chips */ {
          .filter-chip();
          &:first-of-type {
            margin-left: 0;
          }
          &[style*="display: none;"]+.jfk-select {
            margin-left: 0; // Removes unnecessary gap to the left of the category selector 
          }
        }
      }
      
      & .ita-cp-cell .goog-char-picker-grid {
        border-color: var(--ddocs-outline-variant);
        scrollbar-color: var(--ddocs-outline) transparent;
        
        &>.goog-flat-button {
          border-color: var(--ddocs-outline-variant);
          transition: var(--off);
          &.goog-flat-button-hover {
            background-color: var(--ddocs-on-surface-hover);
            transition: var(--on);
          }
          &.goog-flat-button-active {
            background-color: var(--ddocs-on-surface-pressed);
          }
        }
      }
      
      & .ita-cp-cell .ita-cp-search {
        border-color: var(--ddocs-outline-variant);
        &>.ita-cp-lens {
          filter: invert();
        }
        &>.ita-cp-input {
          background: none;
          color: var(--ddocs-on-surface);
        }
      }
      & .ita-cp-cell .ita-cp-hwt {
        background: none;
        border-color: var(--ddocs-outline-variant);
        & .ita-cp-hwt-hint {
          border-color: var(--ddocs-outline);
          & .ita-hwt-canvas {
            filter: brightness(2);
          }
        }
        & .ita-cp-backspace-img.ita-kd-img {
          filter: invert();
        }
      }
    }
    
    // Custom spacing
    .docs-customspacingdialog-content {
      color: var(--ddocs-on-surface-variant);
    }
    
    // Personal dictionary
    .docs-userdictionarydialog-content .docs-userdictionarydialog-list-container {
      background: none;
      border-color: var(--ddocs-outline-variant);
      border-radius: var(--ddocs-corner-xs);
      
      .docs-userdictionarydialog-row-container {
        border-bottom-color: var(--ddocs-outline-variant);
        transition: var(--off);
        &.docs-userdictionarydialog-row-container-hover {
          background-color: var(--ddocs-on-surface-hover);
          transition: var(--on);
        }
        // While I could use .states() here, clicking on it does nothing so I didn’t want the other states to show.
        
        .docs-userdictionarydialog-row-content {
          color: var(--ddocs-on-surface);
        }
      }
      .docs-userdictionarydialog-list-remove-button {
        .icon-button();
        border-radius: 50cqmin;
        box-sizing: border-box;
        height: 32px;
        padding: 4px;
        width: 32px;
        
        .docs-icon-img {
          opacity: 90%;
        }
      }
    }
    
    // Notification settings
    .docos-ssd-content {
      p {
        color: var(--ddocs-on-surface-variant);
      }
      .docos-ssd-radio-button-group {
        .jfk-radiobutton {
          gap: 1rem;
        }
        .jfk-radiobutton-radio {
          border-color: var(--ddocs-on-surface-variant);
          flex-shrink: 0;
          height: 20px;
          left: unset;
          position: relative;
          transform: unset;
          width: 20px;

          &::before {
            border: none;
            left: -12px;
            top: -12px;
            transform: unset;
          }
        }
        .jfk-radiobutton-checked .jfk-radiobutton-radio {
          border-color: var(--ddocs-primary);
        }
        .jfk-radiobutton-label {
          label {
            color: var(--ddocs-on-surface);
          }
          span {
            color: var(--ddocs-on-surface-variant);
          }
        }
      }
    }
    
    &.docs-preferencesdialog-modal {
      .docs-preferencesdialog-tabbed-menu-tabbar {
        .tabs();
      }
      .docs-preferencesdialog-control .docs-material-gm-checkbox-focused::after /* Preferences dialog implements checkbox state layers in a way that conflicts with how I do it */ {
        background-color: currentColor;
        left: -13px;
        top: -13px;
      }
      .docs-preferencesdialog-subtext, 
      .sketchy-preferencesdialog-auto-fit-label {
        color: var(--ddocs-on-surface);
      }
      .docs-icon-info {
        .on-surface-variant-icon();
      }
      .docs-preferencesdialog-list-title {
        color: var(--ddocs-on-surface-variant);
      }
      .docs-preferencesdialog-list-body {
        background: none;
        border-color: var(--ddocs-outline-variant);
      }
      .docs-preferencesdialog-row .goog-flat-button {
        .icon-button();
        border-radius: 50cqmin;
        height: 32px;
        width: $height;
        &[style*="display: inline;"] {
          display: inline-block !important;
        }
        
        .docs-icon {
          background-image: url("https://www.gstatic.com/images/icons/material/system_gm/2x/clear_white_18dp.png");
          background-position: center;
          background-repeat: no-repeat;
          background-size: 18px;
          height: 32px;
          margin: 0;
          width: $height;
        }
        .docs-icon-img-container {
          display: none;
        }
      }
    }
    
    // Accessibility settings
    &.a11y-settings-dialog .a11y-settings-dialog-help-link .docs-icon {
      .on-surface-variant-icon();
    }
    
    // Feedback on [autocorrect] suggestion 
    &.docs-autocorrect-feedbackdialog {
      .docs-autocorrect-feedbackdialog-context-prefix {
        color: var(--ddocs-on-surface-variant);
      }
      .docs-autocorrect-feedbackdialog-other-feedback-header-text {
        color: var(--ddocs-on-surface);
      }
      .docs-autocorrect-feedbackdialog-legal-information-text {
        color: var(--ddocs-on-surface-variant);
      }
      .docs-autocorrect-feedbackdialog-product-info-display-text u {
        color: var(--ddocs-primary);
      }
    }
  }
  
  // Insert special character rich tooltip
  .goog-char-picker-hovercard {
    background-color: var(--ddocs-surface-container-high);
    border: none !important;
    border-radius: var(--ddocs-corner-m);
    box-shadow: var(--ddocs-level2);
    
    .goog-char-picker-unicode {
      color: var(--ddocs-on-surface-variant);
    }
  }
  
  // Bubbles (I’m treating this as a dialog/snackbar hybrid) 
  
  // Autocorrect
  .docs-gm .docs-autocorrect-bubble {
    background: var(--ddocs-surface-container);
    border: none;
    box-shadow: var(--ddocs-level2);
    
    .docs-autocorrect-bubble-undo {
      .states(@role: "surface");
      
      .docs-icon-undo-autocorrect {
        filter: var(--white-icons);
      }
    }
    .docs-autocorrect-bubble-more-options {
      .icon-button();
    }
  }
  
  // Find bar (Ctrl+F) 
  #docs-additional-bars .docs-slidingdialog-holder:has(.docs-findbar-content) {
    overflow: visible;
    
    .docs-slidingdialog {
      background-color: var(--ddocs-surface-container);
      border: none;
      border-radius: var(--ddocs-corner-m);
      box-shadow: var(--ddocs-level2);
      line-height: 0;
      padding: 16px;

      #docs-slidingdialog-content {
        position: static;

        #docs-findbar-input {
          height: auto;

          .docs-findinput-container {
            background: none;
            border-color: var(--ddocs-outline);
            padding: 1px 8px;
            transition: var(--off);
            &:hover {
              border-color: var(--ddocs-on-surface);
              transition: var(--on);
            }
            &.docs-findinput-container-focus {
              border: 1px solid var(--ddocs-primary);
              box-shadow: inset 0 0 0 1px var(--ddocs-primary);
            }

            input {
              caret-color: var(--ddocs-primary);
              color: var(--ddocs-on-surface);
              &::placeholder {
                color: var(--ddocs-on-surface-variant);
              }
              &::selection {
                background-color: var(--ddocs-primary);
                color: var(--ddocs-on-primary);
              }
            }
            .docs-findinput-count {
              color: var(--ddocs-on-surface-variant);
            }
          }
        }
        .docs-findbar-content .jfk-button {
          .icon-button();
          border: none;
          border-radius: 50%;
          height: 36px;
          vertical-align: top;
          width: 36px;
          
          .docs-icon {
            margin: 9px;
            transform: scale(133%);
          }
          .docs-icon-overflow-three-dots {
            filter: var(--white-icons) !important;
          }
        }
        .goog-toolbar-separator {
          border-left-color: var(--ddocs-outline-variant);
          margin: 0 4px;
          vertical-align: 50%;
        }
      }
      .docs-slidingdialog-close-container {
        padding-top: 0;
        position: static;
        vertical-align: top;
        
        .docs-icon {
          margin: 9px;
          transform: scale(133%);
        }
        .docs-slidingdialog-button-close {
          .icon-button();
          border-radius: 50%;
          height: 36px;
          outline: none;
          width: 36px;
        }
      }
    }
  }
  
  // “View only” popup
  .docs-grille-gm3 .docs-access-level-indicator-menu {
    padding: .75rem 1rem .5rem;
    
    .docs-access-level-indicator-menu-header:empty {
      display: none;
    }
    .docs-access-level-indicator-menu-text {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-access-level-indicator-request-access-button {
      align-items: center;
      background: none;
      border: none;
      color: var(--ddocs-primary);
      display: inline-flex;
      height: 2.5rem;
      margin-top: .75rem;
      padding: 0 .75rem;
      &.docs-material-button-hover {
        background: var(--ddocs-primary-hover);
      }
    }
  }
  
  // Insert word art
  div.sketchy-bubble {
    background-color: var(--ddocs-surface-container);
    border: none;
    border-radius: var(--ddocs-corner-xs);
    box-shadow: var(--ddocs-level2);
    color: var(--ddocs-on-surface);
    
    .sketchy-bubble-textarea {
      background: none;
      border: 1px solid var(--ddocs-outline);
      border-radius: var(--ddocs-corner-xs);
      box-shadow: none;
      caret-color: var(--ddocs-primary);
      color: var(--ddocs-on-surface);
      font-size: 1rem;
      transition: var(--off);
      &:hover {
        border-color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &:focus, &:focus-visible {
        border-color: var(--ddocs-primary);
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        outline: none;
      }
    }
    .sketchy-bubble-hint {
      color: var(--ddocs-on-surface-variant);
      font-size: 0.75rem;
    }
  }
  
  // Links: insert and preview. These bubbles really behave like rich tooltips, so that’s the spec I’m referencing for this one.
  .docs-gm .docs-linkbubble-bubble {
    background-color: var(--ddocs-surface-container);
    border: none;
    box-shadow: var(--ddocs-level2);
    color: var(--ddocs-on-surface);
    
    // Preview
    .docs-link-bubble-mime-icon .docs-icon-img {
      .on-surface-variant-icon();
    }
    a {
      color: var(--ddocs-primary) !important;
    }
    .docs-bubble-button {
      .icon-button();
    }
    .drive-image-thumbnail-component .docs-link-bubble-thumbnail-container {
      background-color: var(--ddocs-surface-container-highest);
      border-color: var(--ddocs-outline-variant);
    }
    &.docs-linkbubble-link-preview .docs-link-bubble-text-card-component span {
      color: var(--ddocs-on-surface-variant) !important;
    }
    
    // Insert
    .docs-link-smartinsertlinkbubble-anchor-text-container /* Link text */ {
      .docs-link-smartinsertlinkbubble-text-label {
        background-color: var(--ddocs-surface-container);
        box-shadow: none;
        color: var(--dddocs-on-surface-variant);
        left: 7px;
        padding: 0 5px;
        &:has(+.docs-link-smartinsertlinkbubble-text:hover) {
          color: var(--ddocs-on-surface);
        }
        &:has(+.docs-link-smartinsertlinkbubble-text:focus) {
          color: var(--ddocs-primary);
        }
      }
      .docs-link-smartinsertlinkbubble-text {
        &:focus {
          color: var(--ddocs-on-surface);
        }
        &::selection {
          background-color: var(--ddocs-primary);
          color: var(--ddocs-on-primary);
        }
      }
    }
    .docs-smart-link-searchinput-search-container {
      background: none;
      border-color: var(--ddocs-outline);
      transition: var(--off);
      &:hover {
        border-color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &.docs-link-searchinput-search-container-focus {
        border: 1px solid var(--ddocs-primary) !important;
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
      }
      
      .docs-link-smartinsertlinkbubble-search-icon {
        &.docs-link-smartinsertlinkbubble-search-icon-focused {
          padding: 6px;
        }
        .docs-icon-img {
          filter: var(--white-icons);
        }
      }
      
      input.docs-link-searchinput-search {
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        &::placeholder {
          color: var(--ddocs-on-surface-variant);
        }
        &::selection {
          background-color: var(--ddocs-primary);
          color: var(--ddocs-on-primary);
        }
      }
    }
    .docs-link-smartinsertlinkbubble-apply-button {
      .common-button(@type: "text") !important;
    }
    
    .docs-link-smartlinksuggestion /* Each suggestion */ {
      .states(@role: "surface");
      
      .docs-link-smartlinksuggestion-icon .docs-icon-img {
        .on-surface-variant-icon();
      }
      .docs-link-smartlinksuggestion-title {
        color: inherit;
      }
      .docs-link-smartlinksuggestion-search {
        color: var(--ddocs-on-surface-variant);
      }
    }
    
    .docs-insert-link-bubble-internal-links-button /* Slides in this presentation */ {
      .states();
      border-top-color: var(--ddocs-outline-variant);
      
      .docs-insert-link-bubble-internal-links-text {
        color: inherit;
      }
      .docs-link-internal-links-icon {
        filter: var(--white-icons);
      }
    }
    
    .docs-link-back-to-search-icon-button {
      .icon-button();
    }
    .docs-insert-link-bubble-back-search-text {
      color: var(--ddocs-on-surface);
    }
    .docs-link-smartinternallinksuggestiongroup-title {
      color: var(--ddocs-on-surface-variant);
    }
  }
  
  // “Promos”
  .docs-gm-promo.jfk-bubble.docs-promo-bubble {
    box-shadow: var(--ddocs-level2);
  }
  
  // Spell check
  .docs-checkupdialog {
    .docs-checkupdialog-content-container {
      background-color: var(--ddocs-surface-container);
      border-radius: var(--ddocs-corner-m);
      color: var(--ddocs-on-surface);
    }
    .docs-checkupdialog-header {
      border: none;
      font-size: 1.375rem;
      font-weight: 400;
      height: 4rem;
      line-height: 1.75rem;
      padding: 0 1rem 0 24px;
    }
    .docs-checkupdialog-next-misspelling, .docs-checkupdialog-previous-misspelling {
      background-clip: content-box;
      border: 4px solid transparent !important;
      height: 48px;
      margin: 0;
      padding: 0 !important;
      top: .5rem;
      width: 48px;
      &.docs-material-button-disabled {
        background: none !important;
        opacity: 38%;
      }
      &.docs-material-button-hover {
        background-color: var(--ddocs-on-surface-variant-hover);
        transition: var(--on);
      }
      &.docs-material-button-focused {
        background-color: var(--ddocs-on-surface-variant-focus);
      }
      .docs-material-button-ripple-element when (@ripples = 1) {
        background-color: var(--ddocs-on-surface-variant-pressed);
      }
      .docs-icon {
        margin: 11px;
      }
      .docs-icon-img {
        filter: var(--white-icons);
      }
    }
    .docs-checkupdialog-previous-misspelling {
      right: 7.25rem;
    }
    .docs-checkupdialog-next-misspelling {
      right: 4.25rem;
    }
    .docs-checkupdialog-close-container {
      height: 3rem;
      padding-top: unset;
      right: 1.25rem;
      top: .5rem;
      width: 3rem;
      .docs-checkupdialog-button-close {
        background-clip: content-box;
        border-radius: 50cqmin;
        box-sizing: border-box;
        height: 3rem;
        opacity: 1;
        padding: .25rem;
        width: 3rem;
        .icon-button();
        &:focus {
          outline: none;
        }
        .docs-icon {
          background-image: url("https://fonts.gstatic.com/s/i/materialiconsoutlined/close/v17/24px.svg");
          filter: invert() opacity(.8) !important;
          height: 24px;
          margin: 8px;
          width: 24px;
        }
        .docs-icon-close {
          display: none;
        }
      }
    }
    .docs-checkupdialog-suggestion-list .docs-checkupdialog-suggestion-button /* Turning these into suggestion chips */ {
      background: none;
      border-color: var(--ddocs-outline);
      border-radius: var(--ddocs-corner-s);
      color: var(--ddocs-on-surface-variant);
      font-weight: 500;
      letter-spacing: .1px;
      padding: 8px 16px;
      .states(@role: "surface-variant");
      &.docs-checkupdialog-suggestion-button-focused.jfk-button-hover:not(.jfk-button-focused) {
        background-color: var(--ddocs-on-surface-variant-hover) !important;
      }
      &.docs-checkupdialog-suggestion-button-focused.jfk-button-hover.jfk-button-focused {
        background-color: var(--ddocs-on-surface-variant-focus) !important;
      }
    }
    .docs-checkupdialog-button-ignore.docs-material-button-hairline-default.docs-material-button {
      color: var(--ddocs-primary);
    }
    .docs-checkupdialog-button-overflow {
      border: none !important;
      .icon-button();
      
      .docs-icon {
        margin: 3px 0px 1px 1px;
      }
    }
  }
}
@-moz-document url-prefix("https://docs.google.com/presentation/d/") {
  // Sidebars
  
  // Basic components
  
  // Buttons, icon, titlebar
  .docs-sidebar-gm-titlebar-icon-button {
    .icon-button();
  }
  
  // Collapsible sections
  .punch-sidebar-tile-chevron .docs-icon-img {
    .on-surface-variant-icon();
  }
  .punch-sidebar-tile-header-text, 
  .punch-sidebar-tile-header-subtext {
    color: var(--ddocs-on-surface);
  }
  
  // Titlebar icon 
  .docs-grille-gm3 .docs-gm-sidebar-icon-path {
    fill: var(--ddocs-primary);
  }
  
  // Text fields
  .punch-sidebar-tile-type-select {
    background: transparent;
  }
  
  // Chat
  .docs-grille-gm3 .docs-chat-pane-container {
    background-color: var(--ddocs-surface-container);
    
    .docs-chat-pane {
      background: none;
    }
    .docs-chat-title-bar {
      background: none;
      border: none;
      color: var(--ddocs-on-surface);
      transition: 0.2s background;
      &.docs-chat-shadow {
        background-color: var(--ddocs-surface-container-high);
        box-shadow: none;
      }
      .docs-icon-info {
        filter: var(--white-icons);
      }
      .docs-chat-title-message {
        opacity: 1;
        h2 {
          color: var(--ddocs-on-surface-variant);
        }
      }
    }
    .docs-chat-messages {
      background: none;
      color: var(--ddocs-on-surface);
      
      .docs-chat-status {
        color: var(--ddocs-on-surface-variant);
      }
      .docs-presence-plus-collab-widget-color-block {
        border-color: var(--ddocs-surface-container);
      }
      .docs-chat-message-tip, .docs-chat-message-body {
        color: black;
        filter: invert() hue-rotate(180deg) contrast(.8) brightness(1.7) saturate(1.5);
      }
    }
    .docs-chat-edit-container {
      background: var(--ddocs-surface-container);
      box-shadow: none;
      
      .docs-chat-edit-box {
        background-color: var(--ddocs-surface-container-highest);
        border-color: transparent;
        border-radius: var(--ddocs-corner-m);
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        transition: var(--off);
        &:hover {
          border-color: var(--ddocs-outline);
          transition: var(--on);
        }
        &:focus {
          border: 1px solid var(--ddocs-primary);
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
          padding: 8px;
        }
        &::placeholder {
          color: var(--ddocs-on-surface-variant);
        }
      }
    }
  }
  
  // Companion apps sidebar 
  .docs-companion-app-switcher-container {
    .app-switcher-button {
      .app-switcher-button-icon-background {
        color: var(--ddocs-on-surface-variant);
        transition: var(--off);
      }
      &.app-switcher-button-hover .app-switcher-button-icon-background {
        background-color: var(--ddocs-on-surface-variant-hover);
        transition: var(--on);
      }
      &.app-switcher-button-focused .app-switcher-button-icon-background {
        background-color: var(--ddocs-on-surface-variant-focus);
      }
      &:is(.app-switcher-button-open, .app-switcher-button-active) .app-switcher-button-icon-background {
        background-color: var(--ddocs-on-surface-variant-pressed);
        .animate-ripple();
      }
      &.app-switcher-button-selected .app-switcher-button-icon-background-inner {
        background-color: color-mix(in srgb, var(--ddocs-on-surface), transparent 84%);
      }
      &.app-switcher-button-selected.agca-gab-yellow .app-switcher-button-icon-background-inner {
        background-color: color-mix(in srgb, #fbbc04, transparent 84%);
      }
      &.app-switcher-button-selected.agca-gab-blue .app-switcher-button-icon-background-inner {
        background-color: color-mix(in srgb, #4285f4, transparent 70%);
      }
      
      .app-switcher-button-icon-container[style*="gm_add_black_24dp.png"] {
        filter: invert() opacity(.8);
      }
      svg.app-switcher-button-icon[fill="#5F6368"] {
        fill: var(--ddocs-on-surface-variant);
      }
    }
    .companion-app-switcher-separator {
      border-color: var(--ddocs-outline-variant);
    }
    
    .companion-collapser-button-container .app-switcher-button-checked /* Collapsed */ .app-switcher-button-icon-background {
      background-color: var(--ddocs-surface-container-low);
      box-shadow: var(--ddocs-level1);
    }
  }
  
  // Diagrams sidebar
  .docs-grille-gm3 .sketchy-diagrams-sidebar {
    background: var(--ddocs-surface-container);
    
    .sketchy-diagrams-sidebar-title {
      background: var(--ddocs-surface-container);
      border: none;
      color: var(--ddocs-on-surface);
      transition: 0.1s background;
      &.sketchy-diagrams-sidebar-title-shadow, 
      &:has(+.sketchy-diagrams-sidebar-content .sketchy-diagrams-thumbnail-select:not([style="display: none;"])>.sketchy-diagrams-thumbnail-select-shadow) {
        background: var(--ddocs-surface-container-high);
        box-shadow: none;
      }
      
      .sketchy-diagrams-sidebar-title-icon g[fill="#F9AB00"] {
        fill: var(--ddocs-primary);
      }
      .sketchy-diagrams-sidebar-title-back-icon {
        .icon-button();
        border-radius: 50cqmin;
        display: grid;
        height: 2rem;
        left: -5px;
        margin-right: 12px;
        place-items: center;
        position: relative;
        width: $height;
        
        .docs-icon {
          margin: 0;
          padding: 0 3px 3px 0;
        }
      }
    }
    
    .sketchy-diagrams-sidebar-content {
      background: none;
      
      // Select category
      .sketchy-diagrams-sidebar-categories {
        scrollbar-gutter: stable both-edges;
        
        .sketchy-diagrams-category-button {
          border-color: var(--ddocs-outline);
          border-radius: var(--ddocs-corner-m);
          color: var(--ddocs-on-surface);
          margin: 0 auto 1rem;
          transition: var(--off);
          
          .sketchy-diagrams-category-button-thumbnail {
            border-color: transparent;
          }
          .sketchy-diagrams-category-button-heading {
            background-color: color-mix(in srgb, var(--ddocs-surface-container), transparent 12%);
            backdrop-filter: blur(4px);
            border-radius: 0 0 var(--ddocs-corner-m) var(--ddocs-corner-m);
            transition: var(--off);
            
            .sketchy-diagrams-category-button-next-icon {
              opacity: 1;
              
              .docs-icon-next {
                .on-surface-variant-icon();
              }
            }
          }
          &:hover {
            background-color: var(--ddocs-on-surface-hover);
            box-shadow: none;
            transition: var(--on);
            
            .sketchy-diagrams-category-button-heading {
              background-color: color-mix(in srgb, #2c2f33, transparent 12%);
              transition: var(--on);
            }
          }
          &:focus {
            background-color: var(--ddocs-on-surface-focus);
            
            .sketchy-diagrams-category-button-heading {
              background-color: color-mix(in srgb, #35383c, transparent 12%);
            }
          }
        }
      }
      
      // Select chart design
      .sketchy-diagrams-thumbnail-select-toolbar {
        background-color: var(--ddocs-surface-container);
        border: none;
        transition: 0.1s background-color;
        
        &.sketchy-diagrams-thumbnail-select-shadow {
          background-color: var(--ddocs-surface-container-high);
          box-shadow: none;
        }
      }
      .sketchy-diagrams-thumbnail-select-scroll {
        scrollbar-gutter: stable both-edges;
        top: 146px;
        
        .docs-thumbnailcontainer-horizontal {
          margin: 0 auto;
          padding-top: unset;
          width: min-content;
          
          .docs-gm-thumbnailcontrol {
            margin: .5rem 0;
            padding: 0;
          }
          
          .docs-thumbnailcontrol-thumbnailcontainer {
            border: 1px solid var(--ddocs-outline);
            border-radius: var(--ddocs-corner-m);
            color: var(--ddocs-on-surface-variant);
            overflow: hidden;
            transition: var(--off);
          }
          .docs-gm-thumbnailcontrol-hover .docs-thumbnailcontrol-thumbnailcontainer {
            background-color: var(--ddocs-on-surface-hover);
            box-shadow: none;
            transition: var(--on);
          }
          .docs-gm-thumbnailcontrol-focused .docs-thumbnailcontrol-thumbnailcontainer {
            background-color: var(--ddocs-on-surface-focus);
          }
          .docs-gm-thumbnailcontrol-active .docs-thumbnailcontrol-thumbnailcontainer {
            background-color: var(--ddocs-on-surface-pressed);
            .animate-ripple();
          }
        }
      }
    }
  }
  
  // Dictionary
  .docs-grille-gm3 .docs-dictionary-sidebar {
    background: var(--ddocs-surface-container);
    
    .docs-dictionary-titlebar {
      background: none;
      border: none;
      color: var(--ddocs-on-surface);
    }
    
    .docs-dictionary-sidebar-searchbar {
      padding: 0 1rem;
      position: relative;
      
      .docs-explore-searchbar-searchicon {
        filter: var(--white-icons);
        left: 28px;
        opacity: 1;
        top: 11.5px;
      }
      .docs-explore-searchbar-labelinput {
        background: var(--ddocs-surface-container-highest);
        border: none;
        border-radius: 50cqh;
        box-shadow: none;
        box-sizing: border-box;
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        width: 100%;
        
        &::placeholder {
          color: var(--ddocs-on-surface-variant);
        }
      }
    }
    
    // Empty state
    .docs-explore-emptylist-body {
      color: var(--ddocs-on-surface-variant);
    }
    
    // Dictionary entries
    .docs-explore-dictionaryentries {
      color: var(--ddocs-on-surface);
    }
    .docs-explore-dictionaryentry-title {
      color: var(--ddocs-on-surface);
    }
    .docs-explore-dictionaryentry-sensefamily-morphunits, 
    .docs-explore-dictionaryentry-sense-antonym-prefix, .docs-explore-dictionaryentry-sense-synonym-prefix {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-explore-dictionaryentry-sense-antonym-clickable, .docs-explore-dictionaryentry-sense-synonym-clickable {
      color: var(--ddocs-primary);
    }
  }
  
  // Explore
  .docs-grille-gm3 .docs-explore-sidebar {
    background-color: var(--ddocs-surface-container);
    
    .docs-explore-sidebar-title {
      background: none;
      border: none;
      color: var(--ddocs-on-surface);
    }
    
    .docs-explore-sidebar-searchbar {
      padding: 0 1rem;
      position: relative;
      
      .docs-explore-searchbar-searchicon {
        filter: var(--white-icons);
        left: 28px;
        opacity: 1;
        top: 11.5px;
      }
      .docs-explore-searchbar-labelinput {
        background: var(--ddocs-surface-container-highest);
        border: none;
        border-radius: 50cqh;
        box-shadow: none;
        box-sizing: border-box;
        caret-color: var(--ddocs-primary);
        color: var(--ddocs-on-surface);
        width: 100%;
        &[aria-haspopup="true"][aria-expanded="true"] {
          border-radius: 21px 21px 0 0;
        }
        &::placeholder {
          color: var(--ddocs-on-surface-variant);
        }
      }
      .docs-explore-searchbar-ac-overlay {
        display: none;
      }
      .docs-explore-searchbar-ac-renderer {
        background-color: var(--ddocs-surface-container-highest);
        border-bottom: none;
        border-radius: 0 0 21px 21px;
        border-top: 1px solid var(--ddocs-outline);
        overflow: hidden;
        width: calc(100% - 2rem);
        
        .docs-explore-searchbar-ac-row {
          transition: var(--off);
          &.docs-explore-searchbar-ac-active {
            background-color: var(--ddocs-on-surface-hover);
            transition: var(--on);
          }
          
          .docs-explore-searchbar-suggestion-itemview-icon {
            opacity: 1;
            .docs-icon-img {
              .on-surface-variant-icon();
            }
          }
        }
      }
    }
    
    .docs-explore-emptylist {
      color: var(--ddocs-on-surface-variant);
      
      .docs-explore-emptylist-title {
        color: var(--ddocs-on-surface);
      }
      .docs-explore-emptylist-body {
        color: inherit;
        margin-bottom: 1rem;
      }
      .docs-explore-emptylist-learnmore {
        background: none;
        border-color: var(--ddocs-outline) !important;
        border-radius: 50cqh;
        color: var(--ddocs-primary) !important;
        transition: var(--off);
        &:hover {
          background-color: var(--ddocs-primary-hover);
          transition: var(--on);
        }
        &:focus {
          background-color: var(--ddocs-primary-focus);
          border-color: var(--ddocs-primary) !important;
        }
        &:active {
          background-color: var(--ddocs-primary-pressed);
          border-color: var(--ddocs-primary) !important;
          .animate-ripple();
        }
      }
    }
    
    .punch-explore-layout-card {
      background: none;
      
      .docs-explore-card-title-heading {
        color: var(--ddocs-on-surface);
      }
      .docs-explore-card-subtitle {
        color: var(--ddocs-on-surface-variant);
      }
      
      .punch-explore-layoutitem-layout-container {
        background: none;
        border: 1px solid var(--ddocs-outline);
        border-radius: var(--ddocs-corner-m);
        outline: none;
        overflow: hidden;
        padding: 0;
        transition: var(--off);
        &.goog-control-hover {
          border-color: var(--ddocs-on-surface);
          transition: var(--on);
        }
        &.goog-control-focused {
          border-color: var(--ddocs-primary);
          outline: 2px solid var(--ddocs-primary);
          outline-offset: -2px;
        }
      }
    }
    
    .docs-explore-tabbar {
      border-bottom-color: var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface-variant);
      
      .docs-explore-tabbar-tab {
        border: none;
        transition: var(--off);
        &.docs-explore-tabbar-tab-hover {
          background-color: var(--ddocs-on-surface-hover);
          color: var(--ddocs-on-surface);
          transition: var(--on);
        }
        &.docs-explore-tabbar-tab-active {
          background-color: var(--ddocs-on-surface-pressed);
          .animate-ripple();
        }
        &.docs-explore-tabbar-tab-selected {
          color: var(--ddocs-primary);
          &.docs-explore-tabbar-tab-hover {
            background-color: var(--ddocs-primary-hover);
          }
          &.docs-explore-tabbar-tab-active {
            background-color: var(--ddocs-primary-pressed);
          }
        }
        
        .docs-explore-tabbar-tab-label {
          color: inherit;
          display: inline-block;
          font-family: Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
          line-height: 48px;
          text-transform: capitalize;
        }
        &.docs-explore-tabbar-tab-selected .docs-explore-tabbar-tab-label::after {
          border-top: 3px solid var(--ddocs-primary);
          border-radius: 3px 3px 0 0;
          bottom: 0;
          content: "";
          display: block;
          position: absolute;
          width: 100%;
        }
      }
    }
    
    .docs-explore-serp-webresultsview {
      background: none;
      .docs-explore-serp-webresultsview-card-container /* Google search results */ {
        background: none;
      }
      .docs-explore-kacard /* Knowledge card */ {
        background-color: var(--ddocs-surface-container-high);
        border-radius: var(--ddocs-corner-m);
        box-shadow: none;
        overflow: hidden;
        
        .docs-explore-kacard-name, 
        .docs-explore-kacard-knowledgepanel-description, 
        .docs-explore-kacard-knowledgepanel-facts-list {
          color: var(--ddocs-on-surface);
        }
        .docs-explore-kacard-disambiguationterm {
          color: var(--ddocs-on-surface-variant);
        }
        .docs-explore-kacard-title-container, 
        .docs-explore-kacard-knowledgepanel-facts-list {
          border-bottom-color: var(--ddocs-outline-variant);
        }
        
        .docs-explore-kacard-knowledgepanel-learnmore {
          .states(@role: "surface");
          
          .docs-explore-kacard-knowledgepanel-learnmore-arrow {
            opacity: .8;

            .docs-explore-img {
              filter: invert();
            }
          }
          &:is(:link, :visited) .docs-explore-kacard-knowledgepanel-learnmore-text {
            color: var(--ddocs-on-surface);
          }
        }
      }
      .docs-explore-serp-webresultscard /* Links */ {
        background: var(--ddocs-surface-container-high);
        border-radius: var(--ddocs-corner-m);
        box-shadow: none;
        
        .docs-explore-serp-webresultscard-header {
          border-bottom-color: var(--ddocs-outline-variant);
          
          .docs-explore-serp-webresultscard-header-text {
            color: var(--ddocs-on-surface);
          }
        }
        .docs-explore-serp-webresult {
          border-bottom-color: var(--ddocs-outline-variant);
          
          a.docs-explore-serp-webresult-title-link:link {
            color: var(--ddocs-primary);
          }
          .docs-explore-serp-webresult-url {
            color: var(--ddocs-tertiary);
          }
          .docs-explore-serp-webresult-snippet {
            color: var(--ddocs-on-surface-variant);
          }
        }
        .docs-explore-serp-webresultscard-allresults {
          .states(@role: "surface");
          border-radius: 0 0 var(--ddocs-corner-m) var(--ddocs-corner-m);
          
          .docs-explore-serp-webresultscard-allresults-arrow {
            opacity: .8;
            .docs-explore-img {
              filter: invert();
            }
          }
          .docs-explore-serp-webresultscard-allresults-text {
            color: var(--ddocs-on-surface);
          }
        }
      }
    }
  }
  
  // Extension sidebar
  .docs-grille-gm3 :is(.addon-sidebar, .script-application-sidebar) {
    background-color: var(--ddocs-surface-container);
    border-left: none;
    border-radius: 16px;
    height: calc(100vh - 65px - 16px) !important;
    overflow: hidden;
    top: 65px !important;
    
    .addon-sidebar-header,
    .script-application-sidebar-header {
      align-items: center;
      background-color: var(--ddocs-surface-container);
      border: none;
      color: var(--ddocs-on-surface);
      display: flex;
      font: 500 16px Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
      height: 56px;
      justify-content: space-between;
      padding: 0 16px;
      
      .addon-sidebar-close,
      .script-application-sidebar-close {
        .icon-button();
        border-radius: 50%;
        height: 32px;
        position: relative;
        right: -7px;
        top: unset;
        width: $height;
        
        .docs-icon {
          margin: 7px;
          user-select: none;
        }
      }
    }
    
    .addon-sidebar-content {
      background-color: var(--ddocs-surface-container-low);
      color: var(--ddocs-on-surface);
      
      .addon-sidebar-card {
        border-bottom-color: var(--ddocs-outline-variant);
        &:last-of-type {
          border-bottom: none;
        }
      }
      .addon-sidebar-card-title-caption {
        color: inherit;
        max-width: 200px;
        white-space: unset;
      }
      .addon-sidebar-card-category, 
      .addon-sidebar-card-summary {
        color: var(--ddocs-on-surface-variant);
      }
      .addon-sidebar-card-check svg {
        fill: var(--ddocs-tertiary);
      }
    }    
    .script-application-sidebar-content {
      top: 56px;
    }
  }
  body.docs-grille-gm3:has(#viewModeButton .docs-icon-expand-more-20) :is(.addon-sidebar, .script-application-sidebar) {
    height: calc(100vh - 6px - 16px) !important;
    top: 6px !important;
  }
  
  // Format options sidebar
  .docs-grille-gm3 .docs-tiled-sidebar {
    background-color: var(--ddocs-surface-container);
    
    .docs-tiled-sidebar-header {
      background-color: var(--ddocs-surface-container);
      border: none;
      color: var(--ddocs-on-surface);
      transition: 0.2s background;
      &.docs-tiled-sidebar-header-shadow {
        background-color: var(--ddocs-surface-container-high);
        box-shadow: none;
      }
      
      .docs-gm-sidebar-icon svg {
        fill: var(--ddocs-primary);
      }
    }
    
    .docs-tiled-sidebar-scroll {
      top: 56px;
    }
    
    .docs-sidebar-tile /* Expandable sections */ {
      color: var(--ddocs-on-surface);

      & .docs-sidebar-tile-header {
        color: var(--ddocs-on-surface);
        transition: var(--off), box-shadow 0.5s;
        &.docs-sidebar-tile-header-disabled {
          background: none !important;
          color: var(--ddocs-on-surface-disabled);
        }
        &.goog-zippy-expanded {
          background-color: transparent;
          & .docs-sidebar-tile-arrow-collapsed {
            transform: unset;
          }
        }
        &:hover {
          background-color: var(--ddocs-on-surface-hover);
          transition: var(--on);
        }
        &:focus {
          background-color: var(--ddocs-on-surface-focus);
          border: none;
          padding: 1rem;
        }
        
        .docs-sidebar-tile-arrow-collapsed {
          display: inline-block;
          filter: var(--whiter-icons);
          transform: rotate(-90deg);
          transition: transform 0.5s ease-out; // Animates the chevron arrow
        }
        .docs-sidebar-tile-arrow-expanded {
          display: none;
        }
      }

      &.docs-sidebar-tile-expanded /* Replaces the elevated look of opened sections with simpler outlines */ {
        border-radius: 0;
        box-shadow: inset 0 1px 0 0 var(--ddocs-outline-variant);
        &.docs-sidebar-tile-border-radius-bottom {
          border-bottom: 1px solid var(--ddocs-outline-variant);
        }
      }
      &:nth-child(1 of [style=""]) {
        box-shadow: none !important;
      }
      
      .docs-sidebar-tile-controls /* Expandable section contents */ {
        background: none;
      }
    }
    
    // Other things in the format sidebar: 
    .docs-sidebar-tile-label, .docs-sidebar-tile-input-label, 
    .docs-number-input-label, .docs-number-input-unit /* Field labels */, 
    .docs-labeled-button-label {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-number-input-container {
      input /* Tighter number input fields for sidebar */ {
        background: none;
        border-bottom-color: var(--ddocs-outline);
        color: var(--ddocs-on-surface);
        &:focus {
          border-bottom-color: var(--ddocs-primary);
        }
      }
      
      .docs-number-input-buttons .goog-flat-button {
        filter: invert();
        opacity: .8;
      }
    }
    .docs-sidebar-tile-section-disabled .docs-sidebar-tile-section-title, 
    .docs-sidebar-tile-controls-disabled .docs-sidebar-tile-label {
      color: color-mix(in srgb, var(--ddocs-on-surface) 38%, transparent);
    }
    .docs-number-input-disabled {
      :is(.docs-number-input, .docs-number-input-label, .docs-number-input-unit) {
        color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%);
      }
      input:disabled {
        border-bottom: 1px solid var(--ddocs-on-surface-disabled);
      }
    }
    .docs-labeled-button-disabled .docs-labeled-button-label {
      color: color-mix(in srgb, var(--ddocs-on-surface), transparent 62%);
    }
    .docs-sidebar-tile .jfk-radiobutton {
      .radio-button();
      padding-left: unset;
      
      .jfk-radiobutton-radio::before {
        left: -10px !important;
      }
    }
    
    .sketchy-video-options-timebox-rtl.jfk-textinput, .sketchy-video-options-timebox.jfk-textinput /* Video start and end times */ {
      background: none;
      border-color: var(--ddocs-outline);
      color: var(--ddocs-on-surface);
      padding: 1px 8px;
      transition: var(--off);
      &:hover {
        border-color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &:focus {
        border: 1px solid var(--ddocs-primary);
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
      }
      
      &+.sketchy-video-options-timebox-reset-button {
        .icon-button();
        border: none;
        border-radius: 50cqmin;
        height: 24px;
        line-height: 24px;
        width: 24px;
      }
    }
    .sketchy-video-options-disabled-current-time-button {
      color: var(--ddocs-on-surface);
    }
    .sketchy-video-options-current-time-button {
      color: var(--ddocs-primary);
    }
    .sketchy-video-options-time-control-container {
      border-bottom-color: var(--ddocs-outline-variant);
    }
    
    .docs-size-rotation-sidebar-rotate-section .docs-material-button {
      height: 40px;
      line-height: 40px;
      width: 40px;
      &.docs-material-button-disabled {
        background: none !important;
      }
      &.docs-material-button-hover {
        background-color: var(--ddocs-on-surface-variant-hover);
        transition: var(--on);
      }
      &.docs-material-button-focused {
        background-color: var(--ddocs-on-surface-variant-focus);
      }
      .docs-material-button-ripple-element when (@ripples = 1) {
        background-color: var(--ddocs-on-surface-variant-pressed);
      }
      .docs-icon {
        .on-surface-variant-icon();
        opacity: 1;
      }
    }
    
    .sketchy-position-from-dropdown .more-info-menu-item-tooltip {
      opacity: 1;
    }
    
    .sketchy-text-fitting-feedback-link {
      .icon-button();
      background-clip: content-box;
      border-radius: 50cqmin;
      box-sizing: border-box;
      height: 48px;
      padding: 4px;
      right: 6px;
      top: 6px;
      width: 48px;
      
      .docs-icon {
        margin: 11px;
      }
    }
    
    .sketchy-shape-effects-shadow-tile {
      .docs-flatcolormenubutton {
        background: none !important;
        border-color: var(--ddocs-outline);
        transition: var(--off);
        &.goog-flat-menu-button-hover {
          border-color: var(--ddocs-on-surface);
          transition: var(--on);
        }
        &.goog-flat-menu-button-focused, &.goog-flat-menu-button-open {
          border: 1px solid var(--ddocs-primary);
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }

        .goog-flat-menu-button-caption {
          border-color: var(--ddocs-outline);
        }
        .goog-flat-menu-button-dropdown {
          .on-surface-variant-icon();
          transition: 0.2s transform;
        }
      }
    }
    
    // Alt text section
    #docs-alt-text-tile-description, .docs-alt-text-tile-title-input {
      background: none;
      border: 1px solid var(--ddocs-outline);
      caret-color: var(--ddocs-primary);
      color: var(--ddocs-on-surface);
      color-scheme: dark;
      transition: var(--off);
      &:hover {
        border-color: var(--ddocs-on-surface);
        transition: var(--on);
      }
      &:focus, &:focus-visible {
        border: 1px solid var(--ddocs-primary);
        box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        outline: none;
      }
    }
    .docs-alt-text-tile-advanced-options-title {
      color: var(--ddocs-primary);
    }
    .docs-alt-text-tile-advanced-options-container-expanded {
      background-color: var(--ddocs-surface-container-high);
    }
  }
  
  // Google Drive/Images/Photos sidebar container
  .docs-grille-gm3 .docs-onepick-integrated-sidebar {
    background-color: var(--ddocs-surface-container);
  }
  
  // Linked objects
  .docs-grille-gm3 .docs-contentembedding-sidebar {
    background-color: var(--ddocs-surface-container);
    
    .docs-contentembedding-titlebar {
      background-color: var(--ddocs-surface-container);
      border-bottom-color: transparent;
      color: var(--ddocs-on-surface);
    }
    
    .docs-contentembedding-sidebar-tile {
      border-bottom-color: var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface);
      transition: var(--off);
      &:hover {
        background-color: var(--ddocs-on-surface-hover);
        transition: var(--on);
      }
      &:focus {
        background-color: var(--ddocs-on-surface-focus);
      }
      &:active {
        .animate-ripple();
      }
      
      .docs-contentembedding-sidebar-tile-icon .docs-icon-img {
        .on-surface-variant-icon();
      }
      .docs-contentembedding-sidebar-tile-title {
        color: inherit;
      }
      .docs-contentembedding-sidebar-tile-subtitle {
        color: var(--ddocs-on-surface-variant);
      }
    }
  }
  
  // Motion sidebar
  .docs-gm .motion-ui.punch-animation-sidebar {
    background-color: var(--ddocs-surface-container);
    color: var(--ddocs-on-surface);
    
    .punch-animation-sidebar-header {
      background-color: var(--ddocs-surface-container);
      border-bottom-color: var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface);
      
      .docs-gm-sidebar-icon {
        g[fill="#f9ab00"] {
          fill: var(--ddocs-primary);
        }
        circle[fill="#FFF"] {
          fill: var(--ddocs-surface-container);
        }
      }
    }
    
    .punch-animation-sidebar-transition-header,
    .punch-animation-sidebar-animation-header, 
    .punch-sidebar-tile-options {
      background: transparent;
    }
    
    .punch-transition-tile .punch-sidebar-tile-thumbnail path[fill="#80868b"] {
      fill: var(--ddocs-on-surface-variant);
    }
    
    .punch-sidebar-tile-duration {
      .docs-material-slider {
        .slider();
      }
      &.punch-toggle-slider-disabled {
        filter: saturate(0) opacity(38%);
      }
    }
    
    .punch-animation-sidebar-tile-container, 
    .punch-animation-sidebar-controls, 
    .punch-sidebar-tile-header {
      background: var(--ddocs-surface-container);
      border-top-color: var(--ddocs-outline-variant);
    }
    
    .punch-sidebar-tile-delete .docs-icon-delete-grey600-24 /* Delete animation garbage can */ {
      filter: var(--white-icons);
    }
    
    .punch-animation-sidebar-add-section {
      border-bottom-color: var(--ddocs-outline-variant);
      
      .punch-animation-sidebar-add /* + Add animation */ {
        .common-button(@type: "outlined");
        border-radius: var(--ddocs-corner-s) !important;
        
        .punch-animation-sidebar-add-icon path[fill="#f29900"] {
          fill: currentColor;
        }
      }
    }
    
    // Playhead
    .punch-animation-sidebar-playhead {
      filter: hue-rotate(106deg) saturate(49%) brightness(87.5%);
    }
    
    // Play/Stop button
    .punch-animation-sidebar-play, .punch-animation-sidebar-stop {
      .common-button();
    }
  }
  
  // Q&A history
  .docs-grille-gm3 .punch-qanda-sidebar {
    background: var(--ddocs-surface-container);
    
    .punch-qanda-sidebar-header {
      background: var(--ddocs-surface-container);
      border-bottom-color: transparent;
      color: var(--ddocs-on-surface);
      
      g[fill="#F9AB00"] {
        fill: var(--ddocs-primary);
      }
    }
    
    // Empty state
    .punch-qanda-sidebar-series-list-empty {
      color: var(--ddocs-on-surface-variant);
    }
    
    // Sessions
    .punch-qanda-series-list-item {
      .states(@role: "surface");
      border-bottom-color: var(--ddocs-outline-variant);
      
      .punch-qanda-series-list-item-name {
        color: var(--ddocs-on-surface);
      }
      .punch-qanda-series-list-item-text {
        color: var(--ddocs-on-surface-variant);
      }
    }
    
    // Session
    .punch-qanda-sidebar-series-view-header {
      background: none;
      border-bottom-color: var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface);
      padding-left: 7px;
      
      .punch-qanda-sidebar-series-view-exit {
        .icon-button();
        background-clip: content-box;
        border-radius: 50cqmin;
        height: 40px;
        line-height: 40px;
        margin-right: 0;
        padding: 2.5px;
        text-align: center;
        width: 40px;
      }
    }
    .punch-qanda-question {
      border-bottom-color: var(--ddocs-outline-variant);
      
      .punch-qanda-question-user-icon-cover {
        background: var(--ddocs-surface-container);
      }
      img[src="https://ssl.gstatic.com/docs/presentations/images/qanda_anonymous.png"] {
        filter: invert() brightness(200%);
      }
      .punch-qanda-question-user-name, .punch-qanda-question-text, .punch-qanda-question-votes-container {
        color: var(--ddocs-on-surface);
      }
      .punch-qanda-question-time {
        color: var(--ddocs-on-surface-variant);
      }
      .punch-qanda-question-votes-icon {
        filter: var(--white-icons);
      }
    }
  }
  
  // Themes sidebar
  .docs-gm .punch-theme-sidebar {
    background-color: var(--ddocs-surface-container);
    
    &>.punch-theme-sidebar-header {
      background-color: var(--ddocs-surface-container);
      border-bottom-color: var(--ddocs-outline-variant);
      color: var(--ddocs-on-surface);
      
      & g[fill="#F9AB00"] {
        fill: var(--ddocs-primary);
      }
    }
    
    & .punch-theme-sidebar-in-presentation-header {
      background-color: transparent;
      color: var(--ddocs-on-surface);
      border-bottom-color: var(--ddocs-outline-variant);
      transition: var(--off);
      &:hover {
        background-color: color-mix(in srgb, var(--ddocs-on-surface), transparent calc(100% - var(--ddocs-hover-state-layer-opacity)));
        transition: var(--on);
      }
      &:focus {
        background-color: color-mix(in srgb, var(--ddocs-on-surface), transparent calc(100% - var(--ddocs-focus-state-layer-opacity)));
        transition: background-color 0.5s;
      }
      &.goog-zippy-expanded {
        background-color: var(--ddocs-surface-container-highest);
        &:hover {
          background-color: color-mix(in srgb, var(--ddocs-surface-container-highest), var(--ddocs-on-surface) var(--ddocs-hover-state-layer-opacity));
        }
        &:focus {
          background-color: color-mix(in srgb, var(--ddocs-surface-container-highest), var(--ddocs-on-surface) var(--ddocs-focus-state-layer-opacity));
          transition: background-color 0.5s;
        }
      }
      & :is(.punch-theme-sidebar-arrow-collapsed, .punch-theme-sidebar-arrow-expanded) .docs-icon-img {
        filter: var(--white-icons);
      }
      
      &+div {
        &>.punch-theme-sidebar-in-presentation-content {
          background-color: transparent;
          transition: background-color 0.5s;
        }
        &>.punch-theme-sidebar-in-presentation-content:not([style*="margin-top: -186px;"]) {
          background-color: var(--ddocs-surface-container-highest);
        }
      }
    }
    
    & .docs-thumbnailcontainer {
      text-align: center;
    }
    
    & .docs-gm-thumbnailcontrol /* Theme thumbnails */ {
      text-align: left;
      & .docs-thumbnailcontrol-thumbnailcontainer {
        border-color: var(--ddocs-outline-variant);
        transition: var(--off);
      }
      &.docs-gm-thumbnailcontrol-hover .docs-thumbnailcontrol-thumbnailcontainer {
        border-color: var(--ddocs-outline);
        transition: var(--on);
      }
      &.docs-gm-thumbnailcontrol-focused .docs-thumbnailcontrol-thumbnailcontainer {
        border-color: var(--ddocs-primary);
        transition: var(--on);
      }
      
      &>.docs-thumbnailcontrol-title {
        color: var(--ddocs-on-surface);
      }
    }
    
    & .punch-theme-sidebar-import-theme {
      border-top-color: var(--ddocs-outline-variant);
      
      & .jfk-button {
        .common-button(@type: "filled tonal"; @role: "secondary");
      }
    }
  }
  
  // Theme colors
  .docs-grille-gm3 .punch-theme-colors-sidebar {
    background: var(--ddocs-surface-container);
    
    .punch-theme-colors-sidebar-header {
      background: var(--ddocs-surface-container);
      border: none;
      color: var(--ddocs-on-surface);
      
      svg g[fill="#F9AB00"] {
        fill: var(--ddocs-primary);
      }
    }
    
    // Pick a theme color to change
    .punch-theme-colors-preview-section {
      background-color: var(--ddocs-surface-container-high);
      box-shadow: none;
      
      .punch-theme-colors-current-theme-header {
        color: var(--ddocs-on-surface-variant);
      }
      .punch-theme-colors-current-theme-name {
        color: var(--ddocs-on-surface);
      }
    }
    
    // Empty state
    .punch-theme-colors-sidebar-inactive-message {
      color: var(--ddocs-on-surface-variant);
    }
    
    // Color picker
    .punch-theme-colors-loading-indicator .docs-indeterminate-loading-bar {
      background: var(--ddocs-surface-container-highest);
      div {
        background: var(--ddocs-primary);
      }
    }
    .docs-material-color-picker-saturation-value-background {
      border-color: transparent;
    }
    .docs-material-color-picker-dragger {
      border: 2px solid var(--ddocs-surface-container);
      box-shadow: none;
      outline: 2px solid var(--ddocs-primary);
    }
    .docs-material-color-swatch-checkbox-background {
      filter: invert() brightness(2);
    }
    .docs-material-hsv-color-picker-rgba-enabled .docs-material-hsv-color-picker-text {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-material-hsv-color-picker-input {
      .text-field();
    }
    .punch-theme-colors-palette-section {
      border-top-color: var(--ddocs-outline-variant);
    }
    .punch-theme-colors-section-heading {
      color: var(--ddocs-on-surface-variant);
    }
    .docs-material-colorpalette-cell .docs-material-colorpalette-colorswatch {
      transition: all 0.15s;
    }
    .docs-material-colorpalette-cell-hover .docs-material-colorpalette-colorswatch {
      border-radius: var(--ddocs-corner-xs);
      box-shadow: var(--ddocs-level2);
      transform: scale(125%);
    }
  }
}

@-moz-document regexp("https:\\/\\/docs\\.google\\.com\\/presentation\\/d\\/.*\\/present.*") {
  // Slideshow
  
  body.punch-viewer-body:not(.punch-viewer-speakernotes-body) {
    .punch-viewer-navbar {
      background-color: var(--ddocs-surface-container);
      box-shadow: var(--ddocs-level2);
      
      .punch-viewer-navbar-prev, .punch-viewer-navbar-next, .punch-viewer-navbar-more {
        .icon-button();
        .docs-icon-img {
          content: url(https://ssl.gstatic.com/docs/presentations/images/punchviewer_material_sprite30_grey_dark.svg);
        }
        &.goog-flat-button-disabled .docs-icon-img {
          opacity: 38%;
        }
      }
      .punch-viewer-navbar-page /* Slide picker */ {
        background-color: var(--ddocs-surface-container-highest);
        color: var(--ddocs-on-surface);
        transition: var(--off);
        &.docs-material-menu-button-flat-default-hover {
          background: color-mix(in srgb, $background-color, var(--ddocs-on-surface) var(--ddocs-hover-state-layer-opacity));
          transition: var(--on);
        }
        &.docs-material-menu-button-flat-default-hover {
          background: color-mix(in srgb, $background-color, var(--ddocs-on-surface) var(--ddocs-focus-state-layer-opacity));
        }
        &.docs-material-menu-button-flat-default-open {
          background: color-mix(in srgb, $background-color, var(--ddocs-on-surface) var(--ddocs-pressed-state-layer-opacity));
          .animate-ripple();
        }
      }
    }
    .punch-viewer-navbar-menu {
      background-color: var(--ddocs-surface-container);
      box-shadow: var(--ddocs-level2);
      
      .goog-menuitem {
        color: var(--ddocs-on-surface);
        transition: var(--off);
        &.goog-menuitem-highlight {
          background-color: var(--ddocs-on-surface-hover);
          transition: var(--on);
        }
        &.goog-menuitem-active:not(.goog-submenu) {
          background-color: var(--ddocs-on-surface-hover);
          .animate-ripple();
        }
        .goog-submenu-arrow {
          color: var(--ddocs-on-surface-variant);
          transition: color 0.3s, transform 0.3s;
        }
        &.goog-submenu-open .goog-submenu-arrow {
          color: var(--ddocs-on-surface);
          transform: translateX(5px);
        }
      }
      .goog-menuitem-icon .docs-icon-img, .goog-menuitem-checkbox {
        .on-surface-variant-icon();
      }
      .punch-viewer-navbar-menu-content .goog-menuitem-content {
        color: var(--ddocs-on-surface);
      }
      .goog-menuitem .goog-menuitem-accel {
        color: var(--ddocs-on-surface-variant);
      }
      .goog-menuseparator {
        border-top-color: var(--ddocs-outline-variant);
      }
    }
  }
}

@-moz-document regexp("https:\\/\\/docs\\.google\\.com\\/presentation\\/d\\/.*\\/present.*") {
  // Presenter view 

  /* body.punch-viewer-body would select in the actual slideshow and we don’t want that */
  body.punch-viewer-speakernotes-body:not(.punch-viewer-body) #punch-viewer-speakernotes .punch-viewer-speakernotes-side-panel /* Left side */ {
    background-color: var(--ddocs-surface);
    
    .punch-viewer-speakernotes-timer-panel {
      background: none;
      border-bottom-color: var(--ddocs-outline-variant);
      
      .punch-viewer-speakernotes-timer-time {
        color: var(--ddocs-on-surface);
        font-family: var(--ddocs-type-brand);
        font-feature-settings: "tnum";
      }
      .punch-viewer-speakernotes-timer-button-container .jfk-button {
        .common-button(@type: "outlined");
        font-family: var(--ddocs-type-brand);
        font-size: 14px;
        font-weight: 500;
        height: 38px;
        line-height: 38px;
        .jfk-button-label {
          margin-left: 0;
        }
      }
    }
    
    .punch-viewer-speakernotes-page-control {
      .goog-flat-menu-button {
        background: none;
        border-color: var(--ddocs-outline);
        border-radius: var(--ddocs-corner-xs);
        color: var(--ddocs-on-surface);
        font-size: 1rem;
        font-weight: 400;
        line-height: 54px;
        padding: 0 52px 0 16px;
        transition: var(--off);
        &.goog-flat-menu-button-hover {
          border-color: var(--ddocs-on-surface) !important;
          transition: var(--on);
        }
        &.goog-flat-menu-button-focused {
          border-color: var(--ddocs-primary) !important;
          box-shadow: inset 0 0 0 1px var(--ddocs-primary);
        }
        .goog-flat-menu-button-caption {
          padding: unset;
        }
        .goog-flat-menu-button-dropdown {
          filter: var(--white-icons) opacity(.8);
          margin: unset;
          right: 20.5px;
          top: 20.5px;
        }
      }
      .punch-viewer-speakernotes-page-container {
        background: none;
        border-color: var(--ddocs-outline-variant);
      }
      .punch-viewer-speakernotes-page-previous, .punch-viewer-speakernotes-page-next {
        border-color: var(--ddocs-outline);
        .punch-viewer-speakernotes-page-iframe {
          border-color: transparent;
        }
        .punch-viewer-speakernotes-page-caption {
          background: none;
          border-color: transparent;
          color: var(--ddocs-primary);
        }
      }
    }
  }
  
  body.punch-viewer-speakernotes-body:not(.punch-viewer-body) #punch-viewer-speakernotes .punch-viewer-speakernotes-dragger /* L|R Divider */ {
    background-color: var(--ddocs-surface-container-low);
    border-color: var(--ddocs-outline-variant);
  }
  
  body.punch-viewer-speakernotes-body:not(.punch-viewer-body) #punch-viewer-speakernotes .punch-viewer-speakernotes-main-panel /* Right side */ {
    .goog-tab-bar {
      background: none;
      border-bottom-color: var(--ddocs-outline-variant) !important;
      
      .goog-tab {
        color: var(--ddocs-on-surface);
        //text-transform: none;
        &.goog-tab-hover {
          background: var(--ddocs-on-surface-hover);
        }
        &.goog-tab-selected {
          background: none;
          border-color: transparent transparent var(--ddocs-primary);
          color: var(--ddocs-primary);
        }
      }
    }
    
    .punch-viewer-speaker-series-intro-onboard-step0 {
      background: #334186;
    }
    .punch-viewer-speaker-series-intro-onboard-step1 {
      background: #124685;
    }
    .punch-viewer-speaker-series-intro-onboard-step2 {
      background: #005229;
    }
    .punch-viewer-speaker-series-intro-buttons .jfk-button {
      .common-button(@type: "filled");
      border: none !important;
      font: 500 14px var(--ddocs-type-brand);
      height: 40px;
      line-height: 40px;
    }
    .punch-viewer-speaker-qanda-content /* Q&A */ {
      .punch-viewer-speaker-series-status-closed .punch-viewer-speaker-series {
        background-color: var(--ddocs-surface-container);
        color: var(--ddocs-on-surface);
      }
      .punch-viewer-speaker-series-status-open .punch-viewer-speaker-series {
        background-color: var(--ddocs-primary-container);
        color: var(--ddocs-on-primary-container);
      }
      .punch-viewer-speaker-series-checkbox .jfk-slideToggle {
        background-color: var(--ddocs-surface-container-highest);
        border: 2px solid var(--ddocs-outline);
        border-radius: 50cqh;
        box-shadow: none;
        box-sizing: border-box;
        height: 32px;
        overflow: visible;
        width: 52px;
        
        .jfk-slideToggle-on, .jfk-slideToggle-off {
          display: none;
        }
        .jfk-slideToggle-thumb {
          background-color: var(--ddocs-outline);
          border: none;
          border-radius: 50%;
          height: 16px;
          left: 6.5px;
          outline: 12px solid transparent;
          top: 6.5px;
          width: 16px;
        }
        &.jfk-slideToggle-hover .jfk-slideToggle-thumb {
          background-color: var(--ddocs-on-surface-variant);
          outline-color: var(--ddocs-on-surface-hover);
        }
        &.jfk-slideToggle-focused .jfk-slideToggle-thumb {
          outline-color: var(--ddocs-on-surface-focus);
        }
        &.jfk-slideToggle-active .jfk-slideToggle-thumb {
          height: 28px;
          left: 0.5px;
          outline-width: 6px;
          top: 0.5px;
          width: 28px;
        }
        &.jfk-slideToggle-checked {
          background-color: var(--ddocs-primary);
          border-color: $background-color;
          
          .jfk-slideToggle-thumb {
            background-color: var(--ddocs-on-primary);
            height: 24px;
            left: 22.5px;
            outline: 8px solid transparent;
            top: 2.5px;
            width: 24px;
          }
          &.jfk-slideToggle-hover .jfk-slideToggle-thumb {
            background-color: var(--ddocs-primary-container);
            outline-color: var(--ddocs-primary-hover);
          }
          &.jfk-slideToggle-focused .jfk-slideToggle-thumb {
            background-color: var(--ddocs-primary-container);
            outline-color: var(--ddocs-primary-focus);
          }
          &.jfk-slideToggle-checked.jfk-slideToggle-active .jfk-slideToggle-thumb {
            height: 28px;
            left: 20.5px;
            outline-width: 6px;
            top: 0.5px;
            width: 28px;
          }
        }
      }
      .punch-viewer-speaker-series .punch-viewer-speaker-series-url a {
        color: inherit;
      }
      
      .punch-viewer-speaker-empty-questions {
        color: var(--ddocs-on-surface-variant);
        
        .punch-viewer-speaker-empty-questions-image img {
          filter: brightness(.5) contrast(2);
        }
      }
      .punch-qanda-question {
        border-bottom-color: var(--ddocs-outline-variant);
        &.punch-qanda-question-presented {
          background-color: var(--ddocs-surface-container-low);
        }
        .punch-qanda-question-user-icon-cover {
          background-color: var(--ddocs-transparent);
        }
        img[src="https://ssl.gstatic.com/docs/presentations/images/qanda_anonymous.png"] {
          filter: invert() brightness(200%);
        }
        .punch-qanda-question-user-name, 
        .punch-qanda-question-currently-presented .punch-qanda-question-text, .punch-qanda-question-text, 
        .punch-qanda-question-votes-container {
          color: var(--ddocs-on-surface);
        }
        .punch-qanda-question-time {
          color: var(--ddocs-on-surface-variant);
        }
        .punch-qanda-question-votes-down-icon, .punch-qanda-question-votes-up-icon {
          filter: var(--white-icons) opacity(.8);
        }
        .punch-qanda-question-present .jfk-button {
          border-radius: 20px;
          box-sizing: border-box;
          font: 500 14px var(--ddocs-type-brand);
          height: 40px;
          line-height: 38px;
          min-width: 110px;
          padding: 0 24px;
          text-transform: none;
          &:not(.jfk-button-checked) {
            .common-button(@type: "outlined");
          }
          &.jfk-button-checked {
            .common-button(@type: "filled");
          }
        }
      }
    }
    
    .punch-viewer-speakernotes-text-header-container {
      border-bottom: 1px solid var(--ddocs-outline-variant);
      
      .punch-viewer-speakernotes-zoom-container {
        padding-right: 4px;
        top: 1px;
        .jfk-button-standard {
          .icon-button();
          background-clip: content-box;
          border: none !important;
          border-radius: 50%;
          height: 40px;
          margin: 0;
          padding: 4px;
          width: 40px;
          
          .jfk-button-img {
            filter: var(--white-icons) opacity(.8);
            margin: 10px;
          }
        }
      }
    }
    
    .punch-viewer-speakernotes-text-body {
      span[style*="color:#000000;background-color:transparent;"] {
        color: var(--ddocs-on-surface) !important;
      }
      span[style*="color:#2200CC;background-color:transparent;"] {
        color: var(--palerblue) !important;
      }
      span:not([style*="color:#000000;background-color:transparent;"], [style*="color:#2200CC;background-color:transparent;"]) {
        filter: var(--darkfilter) brightness(1.5);
      }
    }
  }
  
  body.punch-viewer-speakernotes-body:not(.punch-viewer-body) .goog-menu {
    background-color: var(--ddocs-surface-container);
    border: none;
    border-radius: var(--ddocs-corner-xs);
    box-shadow: var(--ddocs-level2);
    
    .goog-menuitem {
      border: none;
      color: var(--ddocs-on-surface);
      padding: 0 .75rem;
      &:has(.goog-menuitem-checkbox) {
        padding: 0 .75rem 0 3rem;
      }
      
      .states() !important;
      &.goog-menuitem-highlight {
        background-color: var(--ddocs-on-surface-hover);
      }
      &.punch-viewer-presenter-menuitem-skippedslide:not(.goog-option-selected) {
        background: none;
        
        .goog-menuitem-checkbox {
          background-image: url("//ssl.gstatic.com/docs/presentations/images/hide_slide.png");
          background-size: contain;
          filter: invert();
          left: 13.5px;
          top: 5.5px;
        }
      }
      &.goog-option-selected {
        .checkmark-fix();
        
        .goog-menuitem-checkbox {
          left: 13.5px;
        }
      }
      
      .goog-menuitem-content {
        color: inherit;
        font-size: 0.875rem;
        line-height: 2rem;
      }
    }
  }
}
